{"version":3,"sources":["webpack:///./frontend/src/lib/utils.js","webpack:///./frontend/src/scenes/trends/trendsLogic.js","webpack:///./frontend/src/models/actionsModel.js","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./frontend/src/scenes/trends/LineGraph.js","webpack:///./frontend/src/scenes/funnels/FunnelViz.js","webpack:///./frontend/src/scenes/trends/ActionsLineGraph.js","webpack:///./frontend/src/scenes/trends/ActionsTable.js","webpack:///./frontend/src/scenes/trends/ActionsPie.js","webpack:///./frontend/src/scenes/dashboard/Dashboard.js"],"names":["uuid","replace","c","crypto","getRandomValues","Uint8Array","toString","toParams","obj","Object","entries","filter","map","key","val","_isAMomentObject","encodeURIComponent","format","JSON","stringify","handleVal","join","fromParams","window","location","search","slice","split","reduce","a","b","decodeURIComponent","percentage","division","toLocaleString","undefined","style","maximumFractionDigits","Loading","className","TableRowLoading","colSpan","asOverlay","padding","textAlign","CloseButton","props","aria-hidden","Card","title","children","DeleteWithUndo","href","onClick","e","preventDefault","deleteWithUndo","undo","api","update","endpoint","object","id","deleted","then","callback","response","name","toast","toastId","propTypes","PropTypes","string","isRequired","shape","number","selectStyle","control","base","height","minHeight","indicatorsContainer","input","paddingBottom","paddingTop","margin","opacity","valueContainer","marginTop","option","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","capitalizeFirstLetter","charAt","toUpperCase","operatorMap","exact","is_not","icontains","not_icontains","gt","lt","operatorEntries","reverse","formatFilterName","str","value","includes","deletePersonData","person","confirm","objectsEqual","obj1","obj2","EntityTypes","ACTIONS","EVENTS","NEW_ENTITY","disableMinuteFor","dStart","mStart","yStart","all","disableHourFor","ViewType","FILTERS","SESSIONS","cleanFilters","filters","interval","autocorrectInterval","display","session","actions","Array","isArray","events","properties","filterClientSideParams","people_day","people_action","stickiness_days","date_from","minute_disabled","hour_disabled","trendsLogic","kea","dashboardItemId","connect","values","userLogic","actionsModel","loaders","results","loadResults","activeView","get","toAPIParams","setFilters","mergeFilters","fromUrl","setDisplay","loadPeople","action","day","breakdown_value","setShowingPeople","isShowing","setPeople","people","count","setActiveView","type","setCachedUrl","url","reducers","state","router","selectors","searchParams","_","cachedUrls","showingPeople","peopleAction","find","parseInt","peopleDay","listeners","breakpoint","params","entityId","shown_as","date_to","breakdown","filterParams","actionToUrl","pathname","cachedUrl","urlToAction","cleanSearchParams","keys","length","eventNames","event","order","actionContains","steps","step","__default","loadActions","actionsGrouped","data","label","options","forEach","push","afterMount","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","module","exports","Chart","defaults","global","legend","LineGraph","React","createRef","dataset","index","colors","getVar","variable","getComputedStyle","document","body","getPropertyValue","borderColor","backgroundColor","fill","borderWidth","pointHitRadius","myChartRef","chartRef","current","getContext","datasets","labels","myLineChart","destroy","_this","processDataset","datasetCopy","assign","days","pop","datasetLength","dotted","borderDash","datum","responsive","maintainAspectRatio","scaleShowHorizontalLines","tooltips","enabled","intersect","mode","bodySpacing","yPadding","xPadding","caretPadding","displayColors","titleFontColor","labelFontSize","cornerRadius","fontSize","footerSpacing","titleSpacing","callbacks","tooltipItem","entityData","datasetIndex","chartLabel","isEmpty","yLabel","hover","onHover","getElementAtEvent","target","cursor","scales","xAxes","gridLines","lineWidth","ticks","autoSkip","beginAtZero","min","yAxes","point","_datasetIndex","_index","buildChart","prevProps","ref","Component","arrayOf","array","FunnelViz","funnel","bind","fetchFunnel","call","addEventListener","removeEventListener","funnel_id","setState","container","innerHTML","graph","FunnelGraph","displayPercent","createContainer","graphContainer","createElement","classList","add","appendChild","draw","width","to","ActionsLineGraph","filtersParam","useValues","useActions","otherFilters","useEffect","total","item","ActionsTable","fetchGraph","sort","onData","ActionsPie","color_list","color","prev","d","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","position","left","top","marginLeft","Dashboard","fetchDashboard","items","typeMap","element","link","combineUrl","Panel","buttonStyle","lineHeight","overflowY","maxHeight","user","has_events"],"mappings":"w1EAMO,SAASA,IACZ,OAAQ,CAAC,MAAQ,KAAO,KAAO,KAAO,MAAMC,QAAQ,UAAU,SAAAC,GAAC,OAC1DA,EAAKC,OAAOC,gBAAgB,IAAIC,WAAW,IAAI,GAAM,IAAOH,EAAI,GAAMI,SAAS,OAIjF,IAAIC,EAAW,SAAAC,GAMlB,OAAOC,OAAOC,QAAQF,GACjBG,QAAO,+CACPC,KAAI,2BAAEC,EAAF,KAAOC,EAAP,qBAAmBD,EAAnB,YAPO,SAAAC,GACZ,OAAIA,EAAIC,iBAAyBC,mBAAmBF,EAAIG,OAAO,gBAC/DH,EAAqB,WAAf,IAAOA,GAAmBI,KAAKC,UAAUL,GAAOA,EAC/CE,mBAAmBF,IAIKM,CAAUN,OACxCO,KAAK,MAEHC,EAAa,iBACM,IAA1BC,OAAOC,SAASC,OACVF,OAAOC,SAASC,OACXC,MAAM,GACNC,MAAM,KACNC,QAAO,SAACC,EAAGC,GAGR,OADAD,GADAC,EAAIA,EAAEH,MAAM,MACR,IAAMI,mBAAmBD,EAAE,IACxBD,IACR,IACP,IAGCG,EAAa,SAAAC,GAAQ,OAC5BA,EACMA,EAASC,oBAAeC,EAAW,CAC/BC,MAAO,UACPC,sBAAuB,IAE3B,IAECC,EAAU,kBACjB,yBAAKC,UAAU,mBACX,8BACA,8BAIKC,EAAkB,SAAC,GAAD,QAAGC,eAAH,MAAa,EAAb,MAAgBC,iBAAhB,gBAC3B,wBAAIH,UAAWG,EAAY,6BAA+B,IACtD,wBAAID,QAASA,EAASL,MAAO,CAAEO,QAAS,GAAIC,UAAW,WACnD,+BAKDC,EAAc,SAAAC,GACrB,OACI,gCAAUA,EAAV,CAAiBP,UAAW,wBAA0BO,EAAMP,UAAWH,MAAK,KAAOU,EAAMV,SACrF,0BAAMW,cAAY,QAAlB,OAKL,SAASC,EAAKF,GACjB,OACI,+BAASA,EAAT,CAAgBP,UAAW,QAAUO,EAAMP,UAAWH,MAAOU,EAAMV,MAAOa,MAAM,KAC3EH,EAAMG,OAAS,yBAAKV,UAAU,eAAeO,EAAMG,OACnDH,EAAMI,UAKZ,IAAIC,EAAiB,SAAAL,GA+BxB,OACI,uBACIM,KAAK,IACLC,QAAS,SAAAC,GACLA,EAAEC,iBAlCO,SAAjBC,EAAiBC,GACjBC,IAAIC,OAAO,OAASb,EAAMc,SAAW,IAAMd,EAAMe,OAAOC,GAAxD,OACOhB,EAAMe,QADb,IAEIE,SAASN,KACVO,MAAK,WACJlB,EAAMmB,WACN,IAAIC,EACA,6BACMT,EAcE,gDAbA,kCACK,gCAASX,EAAMe,OAAOM,MAD3B,aACoD,IAChD,uBACIf,KAAK,IACLC,QAAS,SAAAC,GACLA,EAAEC,iBACFC,GAAe,KAJvB,wBAehBY,YAAMF,EAAU,CAAEG,QAAS,eAAiBvB,EAAMe,OAAOC,QASrDN,IAEJjB,UAAWO,EAAMP,UACjBH,MAAOU,EAAMV,OAEZU,EAAMI,WAInBC,EAAemB,UAAY,CACvBV,SAAUW,IAAUC,OAAOC,WAC3BZ,OAAQU,IAAUG,MAAM,CACpBP,KAAMI,IAAUC,OAAOC,WACvBX,GAAIS,IAAUI,OAAOF,aACtBA,WACHlC,UAAWgC,IAAUC,OACrBpC,MAAOmC,IAAUV,QAGd,IAAIe,EAAc,CACrBC,QAAS,SAAAC,GAAI,cACNA,GADM,IAETC,OAAQ,GACRC,UAAW,MAEfC,oBAAqB,SAAAH,GAAI,cAClBA,GADkB,IAErBC,OAAQ,MAEZG,MAAO,SAAAJ,GAAI,cACJA,GADI,IAEPK,cAAe,EACfC,WAAY,EACZC,OAAQ,EACRC,QAAS,KAEbC,eAAgB,SAAAT,GAAI,cACbA,GADa,IAEhBnC,QAAS,QACT6C,WAAY,KAEhBC,OAAQ,SAAAX,GAAI,cACLA,GADK,IAERnC,QAAS,eAIN+C,EAAW,SAACC,EAAMC,EAAMC,GAC/B,IAAIC,EACJ,OAAO,WACH,IAAIC,EAAUC,KACVC,EAAOC,UACPC,EAAQ,WACRL,EAAU,KACLD,GAAWF,EAAKS,MAAML,EAASE,IAEpCI,EAAUR,IAAcC,EAC5BQ,aAAaR,GACbA,EAAUS,WAAWJ,EAAOP,GACxBS,GAASV,EAAKS,MAAML,EAASE,KAI5BO,EAAwB,SAAAhC,GACjC,OAAOA,EAAOiC,OAAO,GAAGC,cAAgBlC,EAAO9C,MAAM,IAG5CiF,EAAc,CACvBC,MAAO,WACPC,OAAQ,kBACRC,UAAW,aACXC,cAAe,oBACfC,GAAI,iBACJC,GAAI,gBAGFC,EAAkBzG,OAAOC,QAAQiG,GAAaQ,UAEvCC,EAAmB,SAAAC,GAAO,UACVH,GADU,IACnC,2BAA0C,sBAAhCrG,EAAgC,KAA3ByG,EAA2B,KACtC,GAAID,EAAIE,SAAS1G,GAAM,OAAOwG,EAAIpH,QAAQ,KAAOY,EAAK,IAAxB,WAAkCyG,EAAM3F,MAAM,KAAK,GAAnD,MAFC,8BAInC,OAAO0F,EAAM,IAAH,OAAOV,EAAW,MAAUhF,MAAM,KAAK,GAAvC,MAGD6F,EAAmB,SAACC,EAAQxD,GACrC1C,OAAOmG,QAAQ,qEACXhE,IAAG,OAAQ,cAAgB+D,EAAO3D,IAAIE,MAAK,WACvCI,YAAM,+BACFH,GAAUA,QAIb0D,EAAe,SAACC,EAAMC,GAAP,OAAgB3G,KAAKC,UAAUyG,KAAU1G,KAAKC,UAAU0G,K,s4BCrM7E,IAAMC,EAAc,CACvBC,QAAS,UACTC,OAAQ,SACRC,WAAY,cAGHC,EAAmB,CAC5BC,QAAQ,EACR,OAAO,EACP,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,QAAQ,EACRC,QAAQ,EACR,YAAY,EACZC,QAAQ,EACRC,KAAK,GAGIC,EAAiB,CAC1BJ,QAAQ,EACR,OAAO,EACP,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,QAAQ,EACRC,QAAQ,EACR,YAAY,EACZC,QAAQ,EACRC,KAAK,GAGIE,EAAW,CACpBC,QAAS,UACTC,SAAU,YAGd,SAASC,EAAaC,GAClB,cACOA,GADP,IAEIC,SAAUC,EAAoBF,GAC9BG,QAASH,EAAQI,SAA+B,SAApBJ,EAAQI,QAAqB,eAAiBJ,EAAQG,QAClFE,QAASC,MAAMC,QAAQP,EAAQK,SAAWL,EAAQK,aAAU9G,EAC5DiH,OAAQF,MAAMC,QAAQP,EAAQQ,QAAUR,EAAQQ,YAASjH,EACzDkH,WAAYT,EAAQS,YAAc,KAI1C,SAASC,EAAuBV,GAMxBA,EAJAW,WAIAX,EAHAY,cAGAZ,EAFAa,gBAIJ,OAPA,IAKIb,EALJ,kDAUJ,SAASE,EAAT,GAAsD,IAAvBY,EAAuB,EAAvBA,UAAWb,EAAY,EAAZA,SACtC,IAAKA,EAAU,MAAO,MAEtB,IAAMc,EAAkBzB,EAAiBwB,IAA2B,WAAbb,EACjDe,EAAgBrB,EAAemB,IAA2B,SAAbb,EAEnD,OAAIc,EACO,OACAC,EACA,MAEAf,EAOR,IAAMgB,EAAcC,cAAI,CAC3BjJ,IAAK,SAAAiC,GAAK,OAAIA,EAAMiH,iBAAmB,cAEvCC,QAAS,CACLC,OAAQ,CAACC,IAAW,CAAC,cAAeC,IAAc,CAAC,aAGvDC,QAAS,gBAEU,EAFPH,EAAH,EAAGA,OAAH,MAAiB,CACtBI,QAAS,CACLC,aAAW,gBAAE,sBAAAzI,EAAA,yDACLoI,EAAOM,aAAe/B,EAASE,SAD1B,gCAEQhF,IAAI8G,IAAI,uBAAyBC,YAAYnB,EAAuBW,EAAOrB,WAFnF,+DAIIlF,IAAI8G,IAAI,sBAAwBC,YAAYnB,EAAuBW,EAAOrB,WAJ9E,mFAAF,+CASnBK,QAAS,iBAAO,CACZyB,WAAY,SAAC9B,GAAD,IAAU+B,IAAV,yDAA+BC,EAA/B,8DAAoD,CAAEhC,UAAS+B,eAAcC,YACzFC,WAAY,SAAA9B,GAAO,MAAK,CAAEA,YAE1B+B,WAAY,SAACC,EAAQC,EAAKC,GAAd,MAAmC,CAAEF,SAAQC,MAAKC,oBAC9DC,iBAAkB,SAAAC,GAAS,MAAK,CAAEA,cAClCC,UAAW,SAACC,EAAQC,EAAOP,EAAQC,EAAKC,GAA7B,MAAkD,CAAEI,SAAQC,QAAOP,SAAQC,MAAKC,oBAC3FM,cAAe,SAAAC,GAAI,MAAK,CAAEA,SAC1BC,aAAc,SAACD,EAAME,GAAP,MAAgB,CAAEF,OAAME,UAG1CC,SAAU,oBAAG1C,EAAH,EAAGA,QAASnG,EAAZ,EAAYA,MAAZ,MAAyB,CAC/B8F,QAAS,CACL9F,EAAMiH,gBAAkBjH,EAAM8F,QAAU,SAAAgD,GAAK,OAAIjD,EAAakD,SAAOC,UAAUC,aAAaH,KADvF,OAGA3C,EAAQyB,YAAa,SAACkB,EAAD,GAAsC,IAA5BhD,EAA4B,EAA5BA,QAC5B,OAAOD,EAAa,EAAD,KADqC,EAAnBgC,aAEdiB,EAAQ,IACxBhD,QAKnByC,OAAQ,CACJ,MADI,WAGCpC,EAAQyB,YAAa,kBAAM,QAH5B,MAICzB,EAAQmC,WAAY,SAACY,EAAGX,GAAJ,OAAeA,KAJpC,IAORY,WAAY,CACR,GADQ,OAGHhD,EAAQwC,cAAe,SAACG,EAAD,OAAUJ,EAAV,EAAUA,KAAME,EAAhB,EAAgBA,IAAhB,cAAgCE,GAAhC,UAAwCJ,EAAOE,QAG/EQ,cAAe,EACX,GADW,WAGNjD,EAAQ6B,YAAa,kBAAM,KAHrB,MAIN7B,EAAQiC,kBAAmB,SAACc,EAAD,YAAMb,aAJ3B,MASnBW,UAAW,gBAAGA,EAAH,EAAGA,UAAH,MAAoB,CAC3BvB,WAAY,CAAC,iBAAM,CAACuB,EAAUlD,UAAU,SAAAA,GAAO,OAAKA,EAAQI,QAAUR,EAASE,SAAWF,EAASC,UACnG0D,aAAc,CACV,iBAAM,CAACL,EAAUlD,QAASkD,EAAU7C,UACpC,SAACL,EAASK,GAAV,OACIL,EAAQY,cAAgBP,EAAQmD,MAAK,SAAAvK,GAAC,OAAIA,EAAEiC,KAAOuI,SAASzD,EAAQY,kBAAkB,OAE9F8C,UAAW,CAAC,iBAAM,CAACR,EAAUlD,UAAU,SAAAA,GAAO,OAAIA,EAAQW,eAG9DgD,UAAW,sBAAGtD,EAAH,EAAGA,QAASgB,EAAZ,EAAYA,OAAZ,kBACNhB,EAAQ4B,YADF,gBACe,6BAAAhJ,EAAA,sDAASkH,EAAT,EAASA,QAC3BE,EAAQyB,WAAW,CAAE3B,YADH,2CADf,oDAINE,EAAQ6B,YAJF,gBAIe,aAAyC0B,GAAzC,6BAAA3K,EAAA,6DAASkJ,EAAT,EAASA,OAAQC,EAAjB,EAAiBA,IAAKC,EAAtB,EAAsBA,gBAClCwB,EAASnD,EAAuB,EAAD,KAC9BW,EAAOrB,SADuB,IAEjC8D,SAAU3B,EAAOjH,GACjB0H,KAAMT,EAAOS,QAGe,eAA5BvB,EAAOrB,QAAQ+D,SACfF,EAAOhD,gBAAkBuB,GAEzByB,EAAO/C,UAAYsB,EACnByB,EAAOG,QAAU5B,GAEjBC,IACAwB,EAAOpD,WAAP,OAAyBoD,EAAOpD,YAAhC,UAA6CoD,EAAOI,UAAY5B,KAG9D6B,EAAerC,YAAYgC,GACjCxD,EAAQmC,UAAU,KAAM,KAAML,EAAQC,EAAKC,GAlBzB,SAmBGvH,IAAI8G,IAAJ,kDAAmDsC,IAnBtD,OAmBZzB,EAnBY,OAoBlBmB,IACAvD,EAAQmC,UAAR,UAAkBC,EAAO,UAAzB,aAAkB,EAAWA,OAA7B,UAAqCA,EAAO,UAA5C,aAAqC,EAAWC,MAAOP,EAAQC,EAAKC,GArBlD,4CAJf,mDA6BX8B,YAAa,kBAAG9D,EAAH,EAAGA,QAASgB,EAAZ,EAAYA,OAAQnH,EAApB,EAAoBA,MAApB,kBACRmG,EAAQyB,YAAa,YAAiB,IAAdE,EAAc,EAAdA,QACrB,IAAI9H,EAAMiH,gBAGV,OAAKa,OAAL,EACW,CAAC,UAAWX,EAAOrB,YANzB,MASRK,EAAQsC,eAAgB,YAAc,IAAXC,EAAW,EAAXA,KACxB,IAAI1I,EAAMiH,gBAAV,CAGAd,EAAQwC,aAAaxB,EAAOM,WAAYhJ,OAAOC,SAASwL,SAAWzL,OAAOC,SAASC,QACnF,IAAMwL,EAAYhD,EAAOgC,WAAWT,GACpC,OAAIyB,GAGG,CAAC,UAAWzB,IAAShD,EAASE,SAAW,CAAEM,QAAS,OAAU,QAlBhE,GAsBbkE,YAAa,gBAAGjE,EAAH,EAAGA,QAASgB,EAAZ,EAAYA,OAAQnH,EAApB,EAAoBA,MAApB,MAAiC,CAC1C,UAAW,SAACkJ,EAAGD,GACX,IAAIjJ,EAAMiH,gBAAV,CAIA,IAAMoD,EAAoBxE,EAAaoD,GAGvC,GAAyC,IAArCtL,OAAO2M,KAAKrB,GAAcsB,QAAgBpD,EAAOqD,YAAcrD,EAAOqD,WAAW,GAAI,CACrF,IAAMC,EAAQtD,EAAOqD,WAAW/F,SAAS,aACnC,YACA0C,EAAOqD,WAAW/F,SAAS,WAC3B,UACA0C,EAAOqD,WAAW,GAExBH,EAAkBrF,EAAYE,QAAU,CACpC,CACIlE,GAAIyJ,EACJpJ,KAAMoJ,EACN/B,KAAM1D,EAAYE,OAClBwF,MAAO,IAKd7F,YAAawF,EAAmBlD,EAAOrB,UACxCK,EAAQyB,WAAWyC,GAAmB,GAAO,OAvJ9B,+D,yHClFzBM,EAAiB,SAAC1C,EAAQwC,GAC5B,OAAOxC,EAAO2C,MAAM/M,QAAO,SAAAgN,GAAI,OAAIA,EAAKJ,OAASA,KAAOF,OAAS,GAGxDlD,EAAeL,cAAI,CAC5BM,QAAS,iBAAO,CACZnB,QAAS,CACL2E,UAAW,GACXC,aAAW,gBAAE,4BAAAhM,EAAA,sEACc6B,IAAI8G,IAAI,cADtB,cACHtG,EADG,yBAEFA,EAASmG,SAFP,2CAAF,8CAAE,IAAF,GAMnByB,UAAW,gBAAGA,EAAH,EAAGA,UAAH,MAAoB,CAC3BgC,eAAgB,CACZ,iBAAM,CAAChC,EAAU7C,UACjB,SAAAA,GACI,IAAI8E,EAAO,CACP,CAAEC,MAAO,cAAeC,QAAS,IACjC,CAAED,MAAO,QAASC,QAAS,IAC3B,CAAED,MAAO,WAAYC,QAAS,KASlC,OAPAhF,EAAQiF,SAAQ,SAAAnD,GACZ,IAAI9J,EAAS,CAAE+M,MAAOjD,EAAO5G,KAAMmD,MAAOyD,EAAOjH,IAC7C2J,EAAe1C,EAAQ,iBAAiBgD,EAAK,GAAGE,QAAQE,KAAKlN,GAC7DwM,EAAe1C,EAAQ,cAAcgD,EAAK,GAAGE,QAAQE,KAAKlN,GACzDwM,EAAe1C,EAAQ,iBAAoB0C,EAAe1C,EAAQ,cACnEgD,EAAK,GAAGE,QAAQE,KAAKlN,MAEtB8M,MAKnB3E,OAAQ,kBAAkB,CACtBgF,WADI,EAAGnF,QACa4E,cAhCI,oD,oBCPhC,IAAIjN,EAAM,CACT,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,WAAY,IACZ,cAAe,IACf,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,aAAc,IACd,gBAAiB,IACjB,WAAY,IACZ,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,KAIf,SAASyN,EAAeC,GACvB,IAAIxK,EAAKyK,EAAsBD,GAC/B,OAAOE,EAAoB1K,GAE5B,SAASyK,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE7N,EAAK0N,GAAM,CACpC,IAAIhL,EAAI,IAAIoL,MAAM,uBAAyBJ,EAAM,KAEjD,MADAhL,EAAEqL,KAAO,mBACHrL,EAEP,OAAO1C,EAAI0N,GAEZD,EAAejB,KAAO,WACrB,OAAO3M,OAAO2M,KAAKxM,IAEpByN,EAAeO,QAAUL,EACzBM,EAAOC,QAAUT,EACjBA,EAAevK,GAAK,K,4xCC3RpBiL,IAAMC,SAASC,OAAOC,OAAOnG,SAAU,EAGhC,IAAMoG,EAAb,uMACeC,IAAMC,aADrB,6BAaqB,SAACC,EAASC,GACvB,IAAIC,EAAS,CAAC,OAAQ,SAAU,QAAS,MAAO,SAAU,QACtDC,EAAS,SAAAC,GAAQ,OAAIC,iBAAiBC,SAASC,MAAMC,iBAAiB,KAAOJ,IACjF,UACIK,YAAaN,EAAOD,EAAOD,IAC3BS,iBAAqC,OAAnB,EAAKlN,MAAM0I,MAAoC,YAAnB,EAAK1I,MAAM0I,OAAuBiE,EAAOD,EAAOD,IAC9FU,MAAM,EACNC,YAAa,EACbC,eAAgB,GACbb,MAtBf,yBA0BiB,WACT,IAAMc,EAAa,EAAKC,SAASC,QAAQC,WAAW,MACpD,EAAoC,EAAKzN,MAAnC0N,EAAN,EAAMA,SAAUC,EAAhB,EAAgBA,OAAhB,EAAwBxC,aAEQ,IAArB,EAAKyC,aAA6B,EAAKA,YAAYC,UAC9D,IAAMC,EAAQ,OAEdJ,EACK,EAAK1N,MAAM0I,MAA2B,QAAnB,EAAK1I,MAAM0I,KA6BzBgF,EAAS5P,KAAI,SAAC0O,EAASC,GAAV,OAAoB,EAAKsB,eAAevB,EAASC,MA7BpE,cAEaiB,EAAS5P,KAAI,SAAC0O,EAASC,GACtB,IAAIuB,EAAcrQ,OAAOsQ,OAAO,GAAIzB,GAChCvB,EAAO,IAAIuB,EAAQvB,MACnB0C,EAAS,IAAInB,EAAQmB,QACrBO,EAAO,IAAI1B,EAAQ0B,MAOvB,OANAjD,EAAKkD,MACLR,EAAOQ,MACPD,EAAKC,MACLH,EAAY/C,KAAOA,EACnB+C,EAAYL,OAASA,EACrBK,EAAYE,KAAOA,EACZ,EAAKH,eAAeC,EAAavB,OAbtD,IAeaiB,EAAS5P,KAAI,SAAC0O,EAASC,GACtB,IAAIuB,EAAcrQ,OAAOsQ,OAAO,GAAIzB,GAChC4B,EAAgBJ,EAAY/C,KAAKV,OASrC,OARAyD,EAAYK,QAAS,EACrBL,EAAYM,WAAa,CAAC,GAAI,IAC9BN,EAAY/C,KACR+C,EAAY/C,KAAKV,OAAS,EACpByD,EAAY/C,KAAKnN,KAAI,SAACyQ,EAAO9B,GAAR,OACjBA,GAAS2B,EAAgB,GAAK3B,GAAS2B,EAAgB,EAAIG,EAAQ,QAEvEP,EAAY/C,KACf,EAAK8C,eAAeC,EAAavB,QAK1D,EAAKmB,YAAc,IAAI3B,IAAMqB,EAAY,CACrC5E,KAAM,EAAK1I,MAAM0I,MAAQ,OACzBuC,KAAM,CAEF0C,OAAQA,EACRD,SAAUA,GAEdvC,QACwB,aAApB,EAAKnL,MAAM0I,KACL,CACI8F,YAAY,EACZC,qBAAqB,EACrBC,0BAA0B,EAC1BC,SAAU,CACNC,SAAS,EACTC,WAAW,EACXC,KAAM,UACNC,YAAa,EACbC,SAAU,GACVC,SAAU,GACVC,aAAc,EACdC,eAAe,EACfjC,gBAAiB,UACjBkC,eAAgB,UAChBC,cAAe,GACfC,aAAc,EACdC,SAAU,GACVC,cAAe,EACfC,aAAc,EACdC,UAAW,CACPxE,MAAO,SAASyE,EAAa1E,GACzB,IAAI2E,EAAa3E,EAAKyC,SAASiC,EAAYE,cAC3C,GAAID,EAAWvB,QAAYsB,EAAYlD,OAASmD,EAAW3E,KAAKV,OAAS,EACrE,OAAO,KACX,IAAIW,EAAQ0E,EAAWE,YAAcF,EAAW1E,OAAS,GAUzD,OATI0E,EAAW3H,OAAO1B,aAAe2C,IAAE6G,QAAQH,EAAW3H,OAAO1B,cAC7D2E,GAAS,KACTvN,OAAOC,QAAQgS,EAAW3H,OAAO1B,YAAY6E,SAAQ,WAAaqB,GAAU,eAArB1O,EAAqB,KAAhBC,EAAgB,KACpEyO,EAAQ,IAAGvB,GAAS,MACxBA,GAAS5G,YAAiBvG,GAAKc,MAAM,KAAK,GAAK,IAAMb,KAEzDkN,GAAS,KAGNA,EAAQ,MAAQyE,EAAYK,OAAO5Q,oBAItD6Q,MAAO,CACHnB,KAAM,UACNoB,QAFG,SAEK1P,GACAsN,EAAM9N,MAAMO,UACE2C,KAAKiN,kBAAkB3P,GAC3B+J,OAAQ/J,EAAE4P,OAAO9Q,MAAM+Q,OAAS,UACrC7P,EAAE4P,OAAO9Q,MAAM+Q,OAAS,aAIzCC,OAAQ,CACJC,MAAO,CACH,CACItK,SAAS,EACTuK,UAAW,CAAEC,UAAW,GACxBC,MAAO,CAAEC,UAAU,EAAMC,aAAa,EAAMC,IAAK,KAGzDC,MAAO,CACH,CACI7K,SAAS,EACTyK,MAAO,CACHC,UAAU,EACVC,aAAa,EACbC,IAAK,MAKrBtQ,QAAS,SAACkK,EAAD,GAAoB,IAAXsG,EAAW,YACzB,GAAIA,GAAS,EAAK/Q,MAAMO,QAAS,CAC7B,IAAMiM,EAAUkB,EAASqD,EAAMC,eAC/B,EAAKhR,MAAMO,QAAQ,CACfwQ,QACAvE,UACAC,MAAOsE,EAAME,OACb/F,WAC4B,IAAjB6F,EAAME,QAA0BzE,EAAQmB,OACzCnB,EAAQmB,OAAOoD,EAAME,aACrB5R,EACV6I,SAC4B,IAAjB6I,EAAME,QAA0BzE,EAAQ0B,KACzC1B,EAAQ0B,KAAK6C,EAAME,aACnB5R,EACVmF,WAC4B,IAAjBuM,EAAME,QAA0BzE,EAAQvB,KACzCuB,EAAQvB,KAAK8F,EAAME,aACnB5R,OAK1B,CACImP,YAAY,EACZC,qBAAqB,EACrBwB,MAAO,CAAEnB,KAAM,eAxKzC,+CAGI,WACI5L,KAAKgO,eAJb,gCAOI,SAAmBC,GACXA,EAAUzD,WAAaxK,KAAKlD,MAAM0N,UAClCxK,KAAKgO,eATjB,oBA6KI,WACI,OACI,yBAAKzR,UAAU,mBACX,4BAAQ2R,IAAKlO,KAAKqK,gBAhLlC,GAA+B8D,aAqL/BhF,EAAU7K,UAAY,CAClBkM,SAAUjM,IAAU6P,QAAQ7P,IAAUG,MAAM,CAAEsJ,MAAOzJ,IAAUC,OAAQ8G,MAAO/G,IAAUI,UAAWF,WACnGgM,OAAQlM,IAAU8P,MAAM5P,WACxBwJ,QAAS1J,IAAUV,OACnB2H,KAAMjH,IAAUC,OAChBnB,QAASkB,IAAUoB,O,srBC9LhB,IAAM2O,EAAb,gCAGI,WAAYxR,GAAO,yBACf,cAAMA,GADS,uBAFPsM,IAAMC,aAEC,4BADFD,IAAMC,aAInB,EAAKzD,MAAQ,CACT2I,OAAQzR,EAAMyR,QAElB,EAAKP,WAAa,EAAKA,WAAWQ,KAAhB,QACb1R,EAAMyR,QAAQ,EAAKE,YAAYC,KAAjB,QAPJ,EAHvB,6CAYI,WACQ1O,KAAKlD,MAAMyR,QAAQvO,KAAKgO,aAC5BzS,OAAOoT,iBAAiB,SAAU3O,KAAKgO,cAd/C,kCAgBI,WACIzS,OAAOqT,oBAAoB,SAAU5O,KAAKgO,cAjBlD,yBAmBI,WAAc,WACVtQ,IAAI8G,IAAI,cAAgBxE,KAAKlD,MAAM8F,QAAQiM,WAAW7Q,MAAK,SAAAuQ,GAAM,OAAI,EAAKO,SAAS,CAAEP,UAAU,EAAKP,iBApB5G,gCAsBI,SAAmBC,GACXA,EAAUM,SAAWvO,KAAKlD,MAAMyR,QAAUvO,KAAK4F,MAAM2I,QACrDvO,KAAK8O,SAAS,CAAEP,OAAQvO,KAAKlD,MAAMyR,QAAUvO,KAAKgO,cAxB9D,wBA2BI,WACI,GAAKhO,KAAK4F,MAAM2I,QAA4C,GAAlCvO,KAAK4F,MAAM2I,OAAO7G,MAAML,OAAlD,CACIrH,KAAK+O,UAAUzE,UAAStK,KAAK+O,UAAUzE,QAAQ0E,UAAY,IAC/D,IAAIC,EAAQ,IAAIC,IAAY,CACxBH,UAAW,gBACXhH,KAAM,CACF0C,OAAQzK,KAAK4F,MAAM2I,OAAO7G,MAAM9M,KAAI,SAAA+M,GAAI,gBAAOA,EAAKxJ,KAAZ,aAAqBwJ,EAAKrC,MAA1B,QACxCrB,OAAQjE,KAAK4F,MAAM2I,OAAO7G,MAAM9M,KAAI,SAAA+M,GAAI,OAAIA,EAAKrC,SACjDkE,OAAQ,CAAC,UAAW,gBAExB2F,gBAAgB,IAEpBF,EAAMG,gBAAkB,aACxBH,EAAMF,UAAY/O,KAAK+O,UAAUzE,QACjC2E,EAAMI,eAAiBzF,SAAS0F,cAAc,OAC9CL,EAAMI,eAAeE,UAAUC,IAAI,4BACnCP,EAAMF,UAAUU,YAAYR,EAAMI,gBAElCJ,EAAMS,UA7Cd,oBA+CI,WACI,IAAMnB,EAAWvO,KAAK4F,MAAhB2I,OACN,OAAOA,EACHA,EAAO7G,MAAML,OAAS,EAClB,yBAAK6G,IAAKlO,KAAK+O,UAAWxS,UAAU,gBAAgBH,MAAO,CAAE2C,OAAQ,OAAQ4Q,MAAO,UAEpF,uBAAGvT,MAAO,CAAEiD,OAAQ,SAApB,sCACwC,IACpC,kBAAC,IAAD,CAAMuQ,GAAI,WAAarB,EAAOzQ,IAA9B,kCAIR,kBAAC,IAAD,UA3DZ,GAA+BqQ,aA+D/BG,EAAUhQ,UAAY,CAClBiQ,OAAQhQ,IAAUV,OAClB+E,QAASrE,IAAUG,MAAM,CAAEmQ,UAAWtQ,IAAUI,W,2IClE7C,SAASkR,EAAT,GAA6E,QAAjD9L,uBAAiD,MAA/B,KAA+B,EAAhB+L,EAAgB,EAAzBlN,QACvD,EAA6BmN,oBAAUlM,YAAY,CAAEE,kBAAiBnB,QAASkN,KAAvElN,EAAR,EAAQA,QAASyB,EAAjB,EAAiBA,QACjB,EAAoC2L,qBAAWnM,YAAY,CAAEE,kBAAiBnB,QAASkN,KAA/ExL,EAAR,EAAQA,YAAaQ,EAArB,EAAqBA,WAEiBmL,GAAiBrN,EAA/CY,cAA+CZ,EAAhCW,WAAvB,IAAuDX,EAAvD,iCAMA,OAJAsN,qBAAU,WACN5L,MACD,CAAC/J,YAAS0V,KAEN5L,EACHzB,EAAQI,SAAWqB,EAAQzI,QAAO,SAACuU,EAAOC,GAAR,OAAiBD,EAAQC,EAAK9K,QAAO,GAAK,EACxE,kBAAC,IAAD,CACIE,KAAK,OACLgF,SAAUnG,EACVoG,OAAQpG,EAAQ,GAAGoG,OACnBpN,QACI0G,EACM,KACA,SAAA8J,GACI,IAAQvE,EAAiBuE,EAAjBvE,QAAStE,EAAQ6I,EAAR7I,IACjBF,EAAWwE,EAAQvE,QAAU,UAAWC,EAAKsE,EAAQrE,oBAKvE,uBAAG7I,MAAO,CAAEQ,UAAW,SAAUwC,WAAY,SAA7C,6FAKJ,kBAAC,IAAD,Q,2oBChCD,IAAMiR,EAAb,gCACI,WAAYvT,GAAO,0BACf,cAAMA,IAED8I,MAAQ,GACb,EAAK0K,WAAa,EAAKA,WAAW9B,KAAhB,QAClB,EAAK8B,aALU,EADvB,sCAQI,WAAa,WACL5K,EAAM,sBACN1F,KAAKlD,MAAM8F,QAAQI,UAAS0C,EAAM,wBACtChI,IAAI8G,IAAIkB,EAAMnL,YAASyF,KAAKlD,MAAM8F,UAAU5E,MAAK,SAAA+J,GACxC,EAAKjL,MAAM8F,QAAQI,UAAS+E,EAAOA,EAAKwI,MAAK,SAAC1U,EAAGC,GAAJ,OAAUA,EAAEwJ,MAAQzJ,EAAEyJ,UACxE,EAAKwJ,SAAS,CAAE/G,SAChB,EAAKjL,MAAM0T,QAAU,EAAK1T,MAAM0T,OAAOzI,QAdnD,gCAiBI,SAAmBkG,GACXA,EAAUrL,UAAY5C,KAAKlD,MAAM8F,SACjC5C,KAAKsQ,eAnBjB,oBAsBI,WACI,IAAMvI,EAAS/H,KAAK4F,MAAdmC,KACAnF,EAAY5C,KAAKlD,MAAjB8F,QACN,OAAOmF,EACHA,EAAK,KAAOnF,EAAQI,SAAW+E,EAAK,GAAG0C,QACnC,2BAAOlO,UAAU,SACb,+BACI,4BACI,wBAAIH,MAAO,CAAEuT,MAAO,MAAQ/M,EAAQI,QAAU,oBAAsB,UACpE,wBAAI5G,MAAO,CAAEuT,MAAO,KAAO/M,EAAQI,QAAU,QAAU,UAG1D+E,EAAKnN,KAAI,SAAAwV,GAAI,OACV,wBAAIvV,IAAKuV,EAAKpI,OACV,4BAAKoI,EAAKpI,OACV,4BAAKoI,EAAK9K,aAM1B,uBAAGlJ,MAAO,CAAEQ,UAAW,SAAU4C,UAAW,SAA5C,0CAGJ,kBAAC,IAAD,UA9CZ,GAAkC2O,aAkDlCkC,EAAa/R,UAAY,CACrBsE,QAASrE,IAAUV,OAAOY,WAC1B+R,OAAQjS,IAAUoB,O,ooBCpDtB,IAAI6J,EAAS,CACT,OACA,SACA,QACA,MACA,SACA,OACA,SACA,OACA,SACA,OACA,OACA,aAISiH,EAAb,gCACI,WAAY3T,GAAO,0BACf,cAAMA,IACD8I,MAAQ,GACb,EAAK0K,WAAa,EAAKA,WAAW9B,KAAhB,QAClB,EAAK8B,aAJU,EADvB,sCAOI,WAAa,WACT5S,IAAI8G,IAAI,sBAAwBjK,YAASyF,KAAKlD,MAAM8F,UAAU5E,MAC1D,SAAA+J,GACIA,EAAOA,EAAKwI,MAAK,SAAC1U,EAAGC,GAAJ,OAAUA,EAAEwJ,MAAQzJ,EAAEyJ,SACvC,IAAIoL,EAAalH,EAAO5O,KAAI,SAAA+V,GAAK,OAb/BjH,EAa+CiH,EAZ7DhH,iBAAiBC,SAASC,MAAMC,iBAAiB,KAAOJ,GAD1C,IAAAA,KAcF,EAAKoF,SAAS,CACV/G,KAAM,CACF,CACI0C,OAAQ1C,EAAKnN,KAAI,SAAAwV,GAAI,OAAIA,EAAKpI,SAC9BD,KAAMA,EAAKnN,KACP,SAAAwV,GAAI,OACAA,EAAKrI,MACLqI,EAAKrI,KAAKnM,QAAO,SAACgV,EAAMC,GAAP,OAAaD,EAAOC,IAAG,MAEhD7G,gBAAiB0G,EACjBI,qBAAsBJ,EACtBK,iBAAkBL,EAClB3G,YAAa2G,EACbM,iBAAkB,GAClB9G,YAAa,IAGrBiG,MAAOpI,EAAKnM,QAAO,SAACgV,EAAMR,GAAP,OAAgBQ,EAAOR,EAAK9K,QAAO,KAE1D,EAAKxI,MAAM0T,QAAU,EAAK1T,MAAM0T,OAAOzI,QA/BvD,gCAmCI,SAAmBkG,GACXA,EAAUrL,UAAY5C,KAAKlD,MAAM8F,SAAS5C,KAAKsQ,eApC3D,oBAsCI,WACI,MAAsBtQ,KAAK4F,MAArBmC,EAAN,EAAMA,KAAMoI,EAAZ,EAAYA,MACZ,OAAOpI,EACHA,EAAK,IAAMA,EAAK,GAAG0C,OACf,yBACIrO,MAAO,CACH6U,SAAU,WACVtB,MAAO,OACP5Q,OAAQ,SAGZ,wBACI3C,MAAO,CACH6U,SAAU,WACV5R,OAAQ,SACR6R,KAAM,MACNC,IAAK,MACL9E,SAAU,SAGd,yBAAKjQ,MAAO,CAAEgV,WAAY,OAAQ5R,WAAY,KACzC2Q,IAGT,kBAAC,IAAD,CACI3K,KAAK,WACLgF,SAAUzC,EACV0C,OAAQ1C,EAAK,GAAG0C,UAIxB,uBAAGrO,MAAO,CAAEQ,UAAW,SAAU4C,UAAW,SAA5C,0CAKJ,kBAAC,IAAD,UA1EZ,GAAgC2O,c,usBCVzB,IAAMkD,EAAb,gCACI,WAAYvU,GAAO,0BACf,cAAMA,IAED8I,MAAQ,GACb,EAAK0L,eAAiB,EAAKA,eAAe9C,KAApB,QACtB,EAAK8C,iBALU,EADvB,0CAQI,WAAiB,WACb5T,IAAI8G,IAAI,iBAAiBxG,MAAK,SAAAuT,GAAK,OAAI,EAAKzC,SAAS,CAAEyC,MAAOA,EAAMlN,eAT5E,oBAWI,WAAS,WACCkN,EAAUvR,KAAK4F,MAAf2L,MACFC,EAAU,CACV3B,iBAAkB,CACd4B,QAAS5B,IACT6B,KAAM,SAAA9O,GAAO,OAAI+O,qBAAW,UAAW/O,GAAS8C,MAEpD2K,aAAc,CACVoB,QAASpB,IACTqB,KAAM,SAAA9O,GAAO,OAAI+O,qBAAW,UAAW/O,GAAS8C,MAEpD+K,WAAY,CACRgB,QAAShB,IACTiB,KAAM,SAAA9O,GAAO,OAAI+O,qBAAW,UAAW/O,GAAS8C,MAEpD4I,UAAW,CACPmD,QAASnD,IACToD,KAAM,SAAA9O,GAAO,wBAAeA,EAAQiM,cAI5C,OACI,yBAAKtS,UAAU,OACVgV,GACGA,EAAMlK,OAAS,GACfkK,EAAM3W,KAAI,SAAAwV,GACN,IAAIwB,EAAQJ,EAAQpB,EAAK5K,MAAMiM,QAE/B,OADAG,EAAQ,kBAACA,EAAD,CAAO7N,gBAAiBqM,EAAKtS,GAAI8E,QAASwN,EAAKxN,UAEnD,yBAAKrG,UAAU,QAAQ1B,IAAKuV,EAAKtS,IAC7B,yBAAKvB,UAAU,QACX,wBAAIA,UAAU,eACV,kBAAC,IAAD,CACIA,UAAU,cACVsV,YAAa,CACTC,WAAY,OACZnB,MAAO,cACPtE,SAAU,SAGd,kBAAC,IAAD,CAAM9P,UAAU,gBAAgBqT,GAAI4B,EAAQpB,EAAK5K,MAAMkM,KAAKtB,EAAKxN,UAAjE,cAGA,kBAAC,IAAD,CACI/E,OAAQuS,EACR7T,UAAU,4BACVqB,SAAS,YACTK,SAAU,EAAKqT,gBAJnB,iBASJ,kBAAC,IAAD,CAAM1B,GAAI4B,EAAQpB,EAAK5K,MAAMkM,KAAKtB,EAAKxN,UAAWwN,EAAKjS,OAE3D,yBACI/B,MAAO,CACH2V,UAAW,SACXhT,OAAQ,OACRiT,UAAW,OACXf,SAAU,aAGbW,GAAgB,kBAAC,IAAD,YAMxCL,GAASvR,KAAKlD,MAAMmV,KAAKC,YAA+B,IAAjBX,EAAMlK,QAC1C,gEACsC,kBAAC,IAAD,CAAMuI,GAAG,WAAT,mCAjF1D,GAA+BzB","file":"dashboard.js","sourcesContent":["import React from 'react'\nimport api from './api'\nimport { toast } from 'react-toastify'\nimport PropTypes from 'prop-types'\nimport { Spin } from 'antd'\n\nexport function uuid() {\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))).toString(16)\n    )\n}\n\nexport let toParams = obj => {\n    let handleVal = val => {\n        if (val._isAMomentObject) return encodeURIComponent(val.format('YYYY-MM-DD'))\n        val = typeof val === 'object' ? JSON.stringify(val) : val\n        return encodeURIComponent(val)\n    }\n    return Object.entries(obj)\n        .filter(([key, val]) => val)\n        .map(([key, val]) => `${key}=${handleVal(val)}`)\n        .join('&')\n}\nexport let fromParams = () =>\n    window.location.search != ''\n        ? window.location.search\n              .slice(1)\n              .split('&')\n              .reduce((a, b) => {\n                  b = b.split('=')\n                  a[b[0]] = decodeURIComponent(b[1])\n                  return a\n              }, {})\n        : {}\n\nexport let colors = ['success', 'secondary', 'warning', 'primary', 'danger', 'info', 'dark', 'light']\nexport let percentage = division =>\n    division\n        ? division.toLocaleString(undefined, {\n              style: 'percent',\n              maximumFractionDigits: 2,\n          })\n        : ''\n\nexport let Loading = () => (\n    <div className=\"loading-overlay\">\n        <div></div>\n        <Spin />\n    </div>\n)\n\nexport const TableRowLoading = ({ colSpan = 1, asOverlay = false }) => (\n    <tr className={asOverlay ? 'loading-overlay over-table' : ''}>\n        <td colSpan={colSpan} style={{ padding: 50, textAlign: 'center' }}>\n            <Spin />\n        </td>\n    </tr>\n)\n\nexport let CloseButton = props => {\n    return (\n        <span {...props} className={'close cursor-pointer ' + props.className} style={{ ...props.style }}>\n            <span aria-hidden=\"true\">&times;</span>\n        </span>\n    )\n}\n\nexport function Card(props) {\n    return (\n        <div {...props} className={'card ' + props.className} style={props.style} title=\"\">\n            {props.title && <div className=\"card-header\">{props.title}</div>}\n            {props.children}\n        </div>\n    )\n}\n\nexport let DeleteWithUndo = props => {\n    let deleteWithUndo = undo => {\n        api.update('api/' + props.endpoint + '/' + props.object.id, {\n            ...props.object,\n            deleted: undo ? false : true,\n        }).then(() => {\n            props.callback()\n            let response = (\n                <div>\n                    {!undo ? (\n                        <span>\n                            \"<strong>{props.object.name}</strong>\" deleted.{' '}\n                            <a\n                                href=\"#\"\n                                onClick={e => {\n                                    e.preventDefault()\n                                    deleteWithUndo(true)\n                                }}\n                            >\n                                Click here to undo\n                            </a>\n                        </span>\n                    ) : (\n                        <span>Delete un-done</span>\n                    )}\n                </div>\n            )\n            toast(response, { toastId: 'delete-item-' + props.object.id })\n        })\n    }\n\n    return (\n        <a\n            href=\"#\"\n            onClick={e => {\n                e.preventDefault()\n                deleteWithUndo()\n            }}\n            className={props.className}\n            style={props.style}\n        >\n            {props.children}\n        </a>\n    )\n}\nDeleteWithUndo.propTypes = {\n    endpoint: PropTypes.string.isRequired,\n    object: PropTypes.shape({\n        name: PropTypes.string.isRequired,\n        id: PropTypes.number.isRequired,\n    }).isRequired,\n    className: PropTypes.string,\n    style: PropTypes.object,\n}\n\nexport let selectStyle = {\n    control: base => ({\n        ...base,\n        height: 31,\n        minHeight: 31,\n    }),\n    indicatorsContainer: base => ({\n        ...base,\n        height: 31,\n    }),\n    input: base => ({\n        ...base,\n        paddingBottom: 0,\n        paddingTop: 0,\n        margin: 0,\n        opacity: 1,\n    }),\n    valueContainer: base => ({\n        ...base,\n        padding: '0 8px',\n        marginTop: -2,\n    }),\n    option: base => ({\n        ...base,\n        padding: '2px 15px',\n    }),\n}\n\nexport let debounce = (func, wait, immediate) => {\n    var timeout\n    return function() {\n        var context = this,\n            args = arguments\n        var later = function() {\n            timeout = null\n            if (!immediate) func.apply(context, args)\n        }\n        var callNow = immediate && !timeout\n        clearTimeout(timeout)\n        timeout = setTimeout(later, wait)\n        if (callNow) func.apply(context, args)\n    }\n}\n\nexport const capitalizeFirstLetter = string => {\n    return string.charAt(0).toUpperCase() + string.slice(1)\n}\n\nexport const operatorMap = {\n    exact: '= equals',\n    is_not: \"≠ doesn't equal\",\n    icontains: '∋ contains',\n    not_icontains: \"∌ doesn't contain\",\n    gt: '> greater than',\n    lt: '< lower than',\n}\n\nconst operatorEntries = Object.entries(operatorMap).reverse()\n\nexport const formatFilterName = str => {\n    for (let [key, value] of operatorEntries) {\n        if (str.includes(key)) return str.replace('__' + key, '') + ` ${value.split(' ')[0]} `\n    }\n    return str + ` ${operatorMap['exact'].split(' ')[0]} `\n}\n\nexport const deletePersonData = (person, callback) => {\n    window.confirm('Are you sure you want to delete this user? This cannot be undone') &&\n        api.delete('api/person/' + person.id).then(() => {\n            toast('Person succesfully deleted.')\n            if (callback) callback()\n        })\n}\n\nexport const objectsEqual = (obj1, obj2) => JSON.stringify(obj1) === JSON.stringify(obj2)\n","import { kea } from 'kea'\n\nimport api from 'lib/api'\nimport { objectsEqual, toParams as toAPIParams } from 'lib/utils'\nimport { actionsModel } from '~/models/actionsModel'\nimport { userLogic } from 'scenes/userLogic'\nimport { router } from 'kea-router'\n\nexport const EntityTypes = {\n    ACTIONS: 'actions',\n    EVENTS: 'events',\n    NEW_ENTITY: 'new_entity',\n}\n\nexport const disableMinuteFor = {\n    dStart: false,\n    '-1d': false,\n    '-7d': true,\n    '-14d': true,\n    '-30d': true,\n    '-90d': true,\n    mStart: true,\n    '-1mStart': true,\n    yStart: true,\n    all: true,\n}\n\nexport const disableHourFor = {\n    dStart: false,\n    '-1d': false,\n    '-7d': false,\n    '-14d': false,\n    '-30d': false,\n    '-90d': true,\n    mStart: false,\n    '-1mStart': false,\n    yStart: true,\n    all: true,\n}\n\nexport const ViewType = {\n    FILTERS: 'FILTERS',\n    SESSIONS: 'SESSIONS',\n}\n\nfunction cleanFilters(filters) {\n    return {\n        ...filters,\n        interval: autocorrectInterval(filters),\n        display: filters.session && filters.session === 'dist' ? 'ActionsTable' : filters.display,\n        actions: Array.isArray(filters.actions) ? filters.actions : undefined,\n        events: Array.isArray(filters.events) ? filters.events : undefined,\n        properties: filters.properties || {},\n    }\n}\n\nfunction filterClientSideParams(filters) {\n    const {\n        people_day: _skip_this_one,\n        people_action: _skip_this_too,\n        stickiness_days: __and_this,\n        ...newFilters\n    } = filters\n\n    return newFilters\n}\n\nfunction autocorrectInterval({ date_from, interval }) {\n    if (!interval) return 'day' // undefined/uninitialized\n\n    const minute_disabled = disableMinuteFor[date_from] && interval === 'minute'\n    const hour_disabled = disableHourFor[date_from] && interval === 'hour'\n\n    if (minute_disabled) {\n        return 'hour'\n    } else if (hour_disabled) {\n        return 'day'\n    } else {\n        return interval\n    }\n}\n\n// props:\n// - dashboardItemId\n// - filters\nexport const trendsLogic = kea({\n    key: props => props.dashboardItemId || 'all_trends',\n\n    connect: {\n        values: [userLogic, ['eventNames'], actionsModel, ['actions']],\n    },\n\n    loaders: ({ values }) => ({\n        results: {\n            loadResults: async () => {\n                if (values.activeView === ViewType.SESSIONS) {\n                    return await api.get('api/event/sessions/?' + toAPIParams(filterClientSideParams(values.filters)))\n                }\n                return await api.get('api/action/trends/?' + toAPIParams(filterClientSideParams(values.filters)))\n            },\n        },\n    }),\n\n    actions: () => ({\n        setFilters: (filters, mergeFilters = true, fromUrl = false) => ({ filters, mergeFilters, fromUrl }),\n        setDisplay: display => ({ display }),\n\n        loadPeople: (action, day, breakdown_value) => ({ action, day, breakdown_value }),\n        setShowingPeople: isShowing => ({ isShowing }),\n        setPeople: (people, count, action, day, breakdown_value) => ({ people, count, action, day, breakdown_value }),\n        setActiveView: type => ({ type }),\n        setCachedUrl: (type, url) => ({ type, url }),\n    }),\n\n    reducers: ({ actions, props }) => ({\n        filters: [\n            props.dashboardItemId ? props.filters : state => cleanFilters(router.selectors.searchParams(state)),\n            {\n                [actions.setFilters]: (state, { filters, mergeFilters }) => {\n                    return cleanFilters({\n                        ...(mergeFilters ? state : {}),\n                        ...filters,\n                    })\n                },\n            },\n        ],\n        people: [\n            null,\n            {\n                [actions.setFilters]: () => null,\n                [actions.setPeople]: (_, people) => people,\n            },\n        ],\n        cachedUrls: [\n            {},\n            {\n                [actions.setCachedUrl]: (state, { type, url }) => ({ ...state, [type]: url }),\n            },\n        ],\n        showingPeople: [\n            false,\n            {\n                [actions.loadPeople]: () => true,\n                [actions.setShowingPeople]: (_, { isShowing }) => isShowing,\n            },\n        ],\n    }),\n\n    selectors: ({ selectors }) => ({\n        activeView: [() => [selectors.filters], filters => (filters.session ? ViewType.SESSIONS : ViewType.FILTERS)],\n        peopleAction: [\n            () => [selectors.filters, selectors.actions],\n            (filters, actions) =>\n                filters.people_action ? actions.find(a => a.id === parseInt(filters.people_action)) : null,\n        ],\n        peopleDay: [() => [selectors.filters], filters => filters.people_day],\n    }),\n\n    listeners: ({ actions, values }) => ({\n        [actions.setDisplay]: async ({ display }) => {\n            actions.setFilters({ display })\n        },\n        [actions.loadPeople]: async ({ action, day, breakdown_value }, breakpoint) => {\n            const params = filterClientSideParams({\n                ...values.filters,\n                entityId: action.id,\n                type: action.type,\n            })\n\n            if (values.filters.shown_as === 'Stickiness') {\n                params.stickiness_days = day\n            } else {\n                params.date_from = day\n                params.date_to = day\n            }\n            if (breakdown_value) {\n                params.properties = { ...params.properties, [params.breakdown]: breakdown_value }\n            }\n\n            const filterParams = toAPIParams(params)\n            actions.setPeople(null, null, action, day, breakdown_value)\n            const people = await api.get(`api/action/people/?include_last_event=1&${filterParams}`)\n            breakpoint()\n            actions.setPeople(people[0]?.people, people[0]?.count, action, day, breakdown_value)\n        },\n    }),\n\n    actionToUrl: ({ actions, values, props }) => ({\n        [actions.setFilters]: ({ fromUrl }) => {\n            if (props.dashboardItemId) {\n                return // don't use the URL if on the dashboard\n            }\n            if (!fromUrl) {\n                return ['/trends', values.filters]\n            }\n        },\n        [actions.setActiveView]: ({ type }) => {\n            if (props.dashboardItemId) {\n                return // don't use the URL if on the dashboard\n            }\n            actions.setCachedUrl(values.activeView, window.location.pathname + window.location.search)\n            const cachedUrl = values.cachedUrls[type]\n            if (cachedUrl) {\n                return cachedUrl\n            }\n            return ['/trends', type === ViewType.SESSIONS ? { session: 'avg' } : {}]\n        },\n    }),\n\n    urlToAction: ({ actions, values, props }) => ({\n        '/trends': (_, searchParams) => {\n            if (props.dashboardItemId) {\n                return // don't use the URL if on the dashboard\n            }\n\n            const cleanSearchParams = cleanFilters(searchParams)\n\n            // opening /trends without any params, just open $pageview, $screen or the first random event\n            if (Object.keys(searchParams).length === 0 && values.eventNames && values.eventNames[0]) {\n                const event = values.eventNames.includes('$pageview')\n                    ? '$pageview'\n                    : values.eventNames.includes('$screen')\n                    ? '$screen'\n                    : values.eventNames[0]\n\n                cleanSearchParams[EntityTypes.EVENTS] = [\n                    {\n                        id: event,\n                        name: event,\n                        type: EntityTypes.EVENTS,\n                        order: 0,\n                    },\n                ]\n            }\n\n            if (!objectsEqual(cleanSearchParams, values.filters)) {\n                actions.setFilters(cleanSearchParams, false, true)\n            }\n        },\n    }),\n})\n","import { kea } from 'kea'\nimport api from 'lib/api'\n\nconst actionContains = (action, event) => {\n    return action.steps.filter(step => step.event == event).length > 0\n}\n\nexport const actionsModel = kea({\n    loaders: () => ({\n        actions: {\n            __default: [],\n            loadActions: async () => {\n                const response = await api.get('api/action')\n                return response.results\n            },\n        },\n    }),\n    selectors: ({ selectors }) => ({\n        actionsGrouped: [\n            () => [selectors.actions],\n            actions => {\n                let data = [\n                    { label: 'Autocapture', options: [] },\n                    { label: 'Event', options: [] },\n                    { label: 'Pageview', options: [] },\n                ]\n                actions.forEach(action => {\n                    let format = { label: action.name, value: action.id }\n                    if (actionContains(action, '$autocapture')) data[0].options.push(format)\n                    if (actionContains(action, '$pageview')) data[2].options.push(format)\n                    if (!actionContains(action, '$autocapture') && !actionContains(action, '$pageview'))\n                        data[1].options.push(format)\n                })\n                return data\n            },\n        ],\n    }),\n\n    events: ({ actions }) => ({\n        afterMount: actions.loadActions,\n    }),\n})\n","var map = {\n\t\"./af\": 229,\n\t\"./af.js\": 229,\n\t\"./ar\": 230,\n\t\"./ar-dz\": 231,\n\t\"./ar-dz.js\": 231,\n\t\"./ar-kw\": 232,\n\t\"./ar-kw.js\": 232,\n\t\"./ar-ly\": 233,\n\t\"./ar-ly.js\": 233,\n\t\"./ar-ma\": 234,\n\t\"./ar-ma.js\": 234,\n\t\"./ar-sa\": 235,\n\t\"./ar-sa.js\": 235,\n\t\"./ar-tn\": 236,\n\t\"./ar-tn.js\": 236,\n\t\"./ar.js\": 230,\n\t\"./az\": 237,\n\t\"./az.js\": 237,\n\t\"./be\": 238,\n\t\"./be.js\": 238,\n\t\"./bg\": 239,\n\t\"./bg.js\": 239,\n\t\"./bm\": 240,\n\t\"./bm.js\": 240,\n\t\"./bn\": 241,\n\t\"./bn-bd\": 242,\n\t\"./bn-bd.js\": 242,\n\t\"./bn.js\": 241,\n\t\"./bo\": 243,\n\t\"./bo.js\": 243,\n\t\"./br\": 244,\n\t\"./br.js\": 244,\n\t\"./bs\": 245,\n\t\"./bs.js\": 245,\n\t\"./ca\": 246,\n\t\"./ca.js\": 246,\n\t\"./cs\": 247,\n\t\"./cs.js\": 247,\n\t\"./cv\": 248,\n\t\"./cv.js\": 248,\n\t\"./cy\": 249,\n\t\"./cy.js\": 249,\n\t\"./da\": 250,\n\t\"./da.js\": 250,\n\t\"./de\": 251,\n\t\"./de-at\": 252,\n\t\"./de-at.js\": 252,\n\t\"./de-ch\": 253,\n\t\"./de-ch.js\": 253,\n\t\"./de.js\": 251,\n\t\"./dv\": 254,\n\t\"./dv.js\": 254,\n\t\"./el\": 255,\n\t\"./el.js\": 255,\n\t\"./en-au\": 256,\n\t\"./en-au.js\": 256,\n\t\"./en-ca\": 257,\n\t\"./en-ca.js\": 257,\n\t\"./en-gb\": 258,\n\t\"./en-gb.js\": 258,\n\t\"./en-ie\": 259,\n\t\"./en-ie.js\": 259,\n\t\"./en-il\": 260,\n\t\"./en-il.js\": 260,\n\t\"./en-in\": 261,\n\t\"./en-in.js\": 261,\n\t\"./en-nz\": 262,\n\t\"./en-nz.js\": 262,\n\t\"./en-sg\": 263,\n\t\"./en-sg.js\": 263,\n\t\"./eo\": 264,\n\t\"./eo.js\": 264,\n\t\"./es\": 265,\n\t\"./es-do\": 266,\n\t\"./es-do.js\": 266,\n\t\"./es-mx\": 267,\n\t\"./es-mx.js\": 267,\n\t\"./es-us\": 268,\n\t\"./es-us.js\": 268,\n\t\"./es.js\": 265,\n\t\"./et\": 269,\n\t\"./et.js\": 269,\n\t\"./eu\": 270,\n\t\"./eu.js\": 270,\n\t\"./fa\": 271,\n\t\"./fa.js\": 271,\n\t\"./fi\": 272,\n\t\"./fi.js\": 272,\n\t\"./fil\": 273,\n\t\"./fil.js\": 273,\n\t\"./fo\": 274,\n\t\"./fo.js\": 274,\n\t\"./fr\": 275,\n\t\"./fr-ca\": 276,\n\t\"./fr-ca.js\": 276,\n\t\"./fr-ch\": 277,\n\t\"./fr-ch.js\": 277,\n\t\"./fr.js\": 275,\n\t\"./fy\": 278,\n\t\"./fy.js\": 278,\n\t\"./ga\": 279,\n\t\"./ga.js\": 279,\n\t\"./gd\": 280,\n\t\"./gd.js\": 280,\n\t\"./gl\": 281,\n\t\"./gl.js\": 281,\n\t\"./gom-deva\": 282,\n\t\"./gom-deva.js\": 282,\n\t\"./gom-latn\": 283,\n\t\"./gom-latn.js\": 283,\n\t\"./gu\": 284,\n\t\"./gu.js\": 284,\n\t\"./he\": 285,\n\t\"./he.js\": 285,\n\t\"./hi\": 286,\n\t\"./hi.js\": 286,\n\t\"./hr\": 287,\n\t\"./hr.js\": 287,\n\t\"./hu\": 288,\n\t\"./hu.js\": 288,\n\t\"./hy-am\": 289,\n\t\"./hy-am.js\": 289,\n\t\"./id\": 290,\n\t\"./id.js\": 290,\n\t\"./is\": 291,\n\t\"./is.js\": 291,\n\t\"./it\": 292,\n\t\"./it-ch\": 293,\n\t\"./it-ch.js\": 293,\n\t\"./it.js\": 292,\n\t\"./ja\": 294,\n\t\"./ja.js\": 294,\n\t\"./jv\": 295,\n\t\"./jv.js\": 295,\n\t\"./ka\": 296,\n\t\"./ka.js\": 296,\n\t\"./kk\": 297,\n\t\"./kk.js\": 297,\n\t\"./km\": 298,\n\t\"./km.js\": 298,\n\t\"./kn\": 299,\n\t\"./kn.js\": 299,\n\t\"./ko\": 300,\n\t\"./ko.js\": 300,\n\t\"./ku\": 301,\n\t\"./ku.js\": 301,\n\t\"./ky\": 302,\n\t\"./ky.js\": 302,\n\t\"./lb\": 303,\n\t\"./lb.js\": 303,\n\t\"./lo\": 304,\n\t\"./lo.js\": 304,\n\t\"./lt\": 305,\n\t\"./lt.js\": 305,\n\t\"./lv\": 306,\n\t\"./lv.js\": 306,\n\t\"./me\": 307,\n\t\"./me.js\": 307,\n\t\"./mi\": 308,\n\t\"./mi.js\": 308,\n\t\"./mk\": 309,\n\t\"./mk.js\": 309,\n\t\"./ml\": 310,\n\t\"./ml.js\": 310,\n\t\"./mn\": 311,\n\t\"./mn.js\": 311,\n\t\"./mr\": 312,\n\t\"./mr.js\": 312,\n\t\"./ms\": 313,\n\t\"./ms-my\": 314,\n\t\"./ms-my.js\": 314,\n\t\"./ms.js\": 313,\n\t\"./mt\": 315,\n\t\"./mt.js\": 315,\n\t\"./my\": 316,\n\t\"./my.js\": 316,\n\t\"./nb\": 317,\n\t\"./nb.js\": 317,\n\t\"./ne\": 318,\n\t\"./ne.js\": 318,\n\t\"./nl\": 319,\n\t\"./nl-be\": 320,\n\t\"./nl-be.js\": 320,\n\t\"./nl.js\": 319,\n\t\"./nn\": 321,\n\t\"./nn.js\": 321,\n\t\"./oc-lnc\": 322,\n\t\"./oc-lnc.js\": 322,\n\t\"./pa-in\": 323,\n\t\"./pa-in.js\": 323,\n\t\"./pl\": 324,\n\t\"./pl.js\": 324,\n\t\"./pt\": 325,\n\t\"./pt-br\": 326,\n\t\"./pt-br.js\": 326,\n\t\"./pt.js\": 325,\n\t\"./ro\": 327,\n\t\"./ro.js\": 327,\n\t\"./ru\": 328,\n\t\"./ru.js\": 328,\n\t\"./sd\": 329,\n\t\"./sd.js\": 329,\n\t\"./se\": 330,\n\t\"./se.js\": 330,\n\t\"./si\": 331,\n\t\"./si.js\": 331,\n\t\"./sk\": 332,\n\t\"./sk.js\": 332,\n\t\"./sl\": 333,\n\t\"./sl.js\": 333,\n\t\"./sq\": 334,\n\t\"./sq.js\": 334,\n\t\"./sr\": 335,\n\t\"./sr-cyrl\": 336,\n\t\"./sr-cyrl.js\": 336,\n\t\"./sr.js\": 335,\n\t\"./ss\": 337,\n\t\"./ss.js\": 337,\n\t\"./sv\": 338,\n\t\"./sv.js\": 338,\n\t\"./sw\": 339,\n\t\"./sw.js\": 339,\n\t\"./ta\": 340,\n\t\"./ta.js\": 340,\n\t\"./te\": 341,\n\t\"./te.js\": 341,\n\t\"./tet\": 342,\n\t\"./tet.js\": 342,\n\t\"./tg\": 343,\n\t\"./tg.js\": 343,\n\t\"./th\": 344,\n\t\"./th.js\": 344,\n\t\"./tk\": 345,\n\t\"./tk.js\": 345,\n\t\"./tl-ph\": 346,\n\t\"./tl-ph.js\": 346,\n\t\"./tlh\": 347,\n\t\"./tlh.js\": 347,\n\t\"./tr\": 348,\n\t\"./tr.js\": 348,\n\t\"./tzl\": 349,\n\t\"./tzl.js\": 349,\n\t\"./tzm\": 350,\n\t\"./tzm-latn\": 351,\n\t\"./tzm-latn.js\": 351,\n\t\"./tzm.js\": 350,\n\t\"./ug-cn\": 352,\n\t\"./ug-cn.js\": 352,\n\t\"./uk\": 353,\n\t\"./uk.js\": 353,\n\t\"./ur\": 354,\n\t\"./ur.js\": 354,\n\t\"./uz\": 355,\n\t\"./uz-latn\": 356,\n\t\"./uz-latn.js\": 356,\n\t\"./uz.js\": 355,\n\t\"./vi\": 357,\n\t\"./vi.js\": 357,\n\t\"./x-pseudo\": 358,\n\t\"./x-pseudo.js\": 358,\n\t\"./yo\": 359,\n\t\"./yo.js\": 359,\n\t\"./zh-cn\": 360,\n\t\"./zh-cn.js\": 360,\n\t\"./zh-hk\": 361,\n\t\"./zh-hk.js\": 361,\n\t\"./zh-mo\": 362,\n\t\"./zh-mo.js\": 362,\n\t\"./zh-tw\": 363,\n\t\"./zh-tw.js\": 363\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 375;","import React, { Component } from 'react'\nimport Chart from 'chart.js'\nimport PropTypes from 'prop-types'\nimport { formatFilterName } from '~/lib/utils'\nimport _ from 'lodash'\n\n//--Chart Style Options--//\n// Chart.defaults.global.defaultFontFamily = \"'PT Sans', sans-serif\"\nChart.defaults.global.legend.display = false\n//--Chart Style Options--//\n\nexport class LineGraph extends Component {\n    chartRef = React.createRef()\n\n    componentDidMount() {\n        this.buildChart()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.datasets !== this.props.datasets) {\n            this.buildChart()\n        }\n    }\n\n    processDataset = (dataset, index) => {\n        let colors = ['blue', 'orange', 'green', 'red', 'purple', 'gray']\n        let getVar = variable => getComputedStyle(document.body).getPropertyValue('--' + variable)\n        return {\n            borderColor: getVar(colors[index]),\n            backgroundColor: (this.props.type == 'bar' || this.props.type == 'doughnut') && getVar(colors[index]),\n            fill: false,\n            borderWidth: 1,\n            pointHitRadius: 8,\n            ...dataset,\n        }\n    }\n\n    buildChart = () => {\n        const myChartRef = this.chartRef.current.getContext('2d')\n        let { datasets, labels, options } = this.props\n\n        if (typeof this.myLineChart !== 'undefined') this.myLineChart.destroy()\n        const _this = this\n        // if chart is line graph, make duplicate lines and overlay to show dotted lines\n        datasets =\n            !this.props.type || this.props.type == 'line'\n                ? [\n                      ...datasets.map((dataset, index) => {\n                          let datasetCopy = Object.assign({}, dataset)\n                          let data = [...dataset.data]\n                          let labels = [...dataset.labels]\n                          let days = [...dataset.days]\n                          data.pop()\n                          labels.pop()\n                          days.pop()\n                          datasetCopy.data = data\n                          datasetCopy.labels = labels\n                          datasetCopy.days = days\n                          return this.processDataset(datasetCopy, index)\n                      }),\n                      ...datasets.map((dataset, index) => {\n                          let datasetCopy = Object.assign({}, dataset)\n                          let datasetLength = datasetCopy.data.length\n                          datasetCopy.dotted = true\n                          datasetCopy.borderDash = [10, 10]\n                          datasetCopy.data =\n                              datasetCopy.data.length > 2\n                                  ? datasetCopy.data.map((datum, index) =>\n                                        index == datasetLength - 1 || index == datasetLength - 2 ? datum : null\n                                    )\n                                  : datasetCopy.data\n                          return this.processDataset(datasetCopy, index)\n                      }),\n                  ]\n                : datasets.map((dataset, index) => this.processDataset(dataset, index))\n\n        this.myLineChart = new Chart(myChartRef, {\n            type: this.props.type || 'line',\n            data: {\n                //Bring in data\n                labels: labels,\n                datasets: datasets,\n            },\n            options:\n                this.props.type !== 'doughnut'\n                    ? {\n                          responsive: true,\n                          maintainAspectRatio: false,\n                          scaleShowHorizontalLines: false,\n                          tooltips: {\n                              enabled: true,\n                              intersect: false,\n                              mode: 'nearest',\n                              bodySpacing: 5,\n                              yPadding: 10,\n                              xPadding: 10,\n                              caretPadding: 0,\n                              displayColors: false,\n                              backgroundColor: '#1dc9b7',\n                              titleFontColor: '#ffffff',\n                              labelFontSize: 23,\n                              cornerRadius: 4,\n                              fontSize: 16,\n                              footerSpacing: 0,\n                              titleSpacing: 0,\n                              callbacks: {\n                                  label: function(tooltipItem, data) {\n                                      let entityData = data.datasets[tooltipItem.datasetIndex]\n                                      if (entityData.dotted && !(tooltipItem.index == entityData.data.length - 1))\n                                          return null\n                                      var label = entityData.chartLabel || entityData.label || ''\n                                      if (entityData.action.properties && !_.isEmpty(entityData.action.properties)) {\n                                          label += ' ('\n                                          Object.entries(entityData.action.properties).forEach(([key, val], index) => {\n                                              if (index > 0) label += ', '\n                                              label += formatFilterName(key).split(' ')[1] + ' ' + val\n                                          })\n                                          label += ')'\n                                      }\n\n                                      return label + ' - ' + tooltipItem.yLabel.toLocaleString()\n                                  },\n                              },\n                          },\n                          hover: {\n                              mode: 'nearest',\n                              onHover(e) {\n                                  if (_this.props.onClick) {\n                                      const point = this.getElementAtEvent(e)\n                                      if (point.length) e.target.style.cursor = 'pointer'\n                                      else e.target.style.cursor = 'default'\n                                  }\n                              },\n                          },\n                          scales: {\n                              xAxes: [\n                                  {\n                                      display: true,\n                                      gridLines: { lineWidth: 0 },\n                                      ticks: { autoSkip: true, beginAtZero: true, min: 0 },\n                                  },\n                              ],\n                              yAxes: [\n                                  {\n                                      display: true,\n                                      ticks: {\n                                          autoSkip: true,\n                                          beginAtZero: true,\n                                          min: 0,\n                                      },\n                                  },\n                              ],\n                          },\n                          onClick: (event, [point]) => {\n                              if (point && this.props.onClick) {\n                                  const dataset = datasets[point._datasetIndex]\n                                  this.props.onClick({\n                                      point,\n                                      dataset,\n                                      index: point._index,\n                                      label:\n                                          typeof point._index !== 'undefined' && dataset.labels\n                                              ? dataset.labels[point._index]\n                                              : undefined,\n                                      day:\n                                          typeof point._index !== 'undefined' && dataset.days\n                                              ? dataset.days[point._index]\n                                              : undefined,\n                                      value:\n                                          typeof point._index !== 'undefined' && dataset.data\n                                              ? dataset.data[point._index]\n                                              : undefined,\n                                  })\n                              }\n                          },\n                      }\n                    : {\n                          responsive: true,\n                          maintainAspectRatio: false,\n                          hover: { mode: 'index' },\n                      },\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"graph-container\">\n                <canvas ref={this.chartRef} />\n            </div>\n        )\n    }\n}\nLineGraph.propTypes = {\n    datasets: PropTypes.arrayOf(PropTypes.shape({ label: PropTypes.string, count: PropTypes.number })).isRequired,\n    labels: PropTypes.array.isRequired,\n    options: PropTypes.object,\n    type: PropTypes.string,\n    onClick: PropTypes.func,\n}\n","import React, { Component } from 'react'\nimport api from 'lib/api'\nimport FunnelGraph from 'funnel-graph-js'\nimport { Link } from 'lib/components/Link'\nimport { Loading } from 'lib/utils'\nimport PropTypes from 'prop-types'\n\nexport class FunnelViz extends Component {\n    container = React.createRef()\n    graphContainer = React.createRef()\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            funnel: props.funnel,\n        }\n        this.buildChart = this.buildChart.bind(this)\n        if (!props.funnel) this.fetchFunnel.call(this)\n    }\n    componentDidMount() {\n        if (this.props.funnel) this.buildChart()\n        window.addEventListener('resize', this.buildChart)\n    }\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.buildChart)\n    }\n    fetchFunnel() {\n        api.get('api/funnel/' + this.props.filters.funnel_id).then(funnel => this.setState({ funnel }, this.buildChart))\n    }\n    componentDidUpdate(prevProps) {\n        if (prevProps.funnel !== this.props.funnel && this.state.funnel) {\n            this.setState({ funnel: this.props.funnel }, this.buildChart)\n        }\n    }\n    buildChart() {\n        if (!this.state.funnel || this.state.funnel.steps.length == 0) return\n        if (this.container.current) this.container.current.innerHTML = ''\n        let graph = new FunnelGraph({\n            container: '.funnel-graph',\n            data: {\n                labels: this.state.funnel.steps.map(step => `${step.name} (${step.count})`),\n                values: this.state.funnel.steps.map(step => step.count),\n                colors: ['#66b0ff', 'var(--blue)'],\n            },\n            displayPercent: true,\n        })\n        graph.createContainer = () => {}\n        graph.container = this.container.current\n        graph.graphContainer = document.createElement('div')\n        graph.graphContainer.classList.add('svg-funnel-js__container')\n        graph.container.appendChild(graph.graphContainer)\n\n        graph.draw()\n    }\n    render() {\n        let { funnel } = this.state\n        return funnel ? (\n            funnel.steps.length > 0 ? (\n                <div ref={this.container} className=\"svg-funnel-js\" style={{ height: '100%', width: '100%' }}></div>\n            ) : (\n                <p style={{ margin: '1rem' }}>\n                    This funnel doesn't have any steps.{' '}\n                    <Link to={'/funnel/' + funnel.id}>Click here to add some steps.</Link>\n                </p>\n            )\n        ) : (\n            <Loading />\n        )\n    }\n}\nFunnelViz.propTypes = {\n    funnel: PropTypes.object,\n    filters: PropTypes.shape({ funnel_id: PropTypes.number }),\n}\n","import React, { useEffect } from 'react'\nimport { Loading, toParams } from '../../lib/utils'\nimport { LineGraph } from './LineGraph'\nimport { useActions, useValues } from 'kea'\nimport { trendsLogic } from 'scenes/trends/trendsLogic'\n\nexport function ActionsLineGraph({ dashboardItemId = null, filters: filtersParam }) {\n    const { filters, results } = useValues(trendsLogic({ dashboardItemId, filters: filtersParam }))\n    const { loadResults, loadPeople } = useActions(trendsLogic({ dashboardItemId, filters: filtersParam }))\n\n    const { people_action, people_day, ...otherFilters } = filters\n\n    useEffect(() => {\n        loadResults()\n    }, [toParams(otherFilters)])\n\n    return results ? (\n        filters.session || results.reduce((total, item) => total + item.count, 0) > 0 ? (\n            <LineGraph\n                type=\"line\"\n                datasets={results}\n                labels={results[0].labels}\n                onClick={\n                    dashboardItemId\n                        ? null\n                        : point => {\n                              const { dataset, day } = point\n                              loadPeople(dataset.action || 'session', day, dataset.breakdown_value)\n                          }\n                }\n            />\n        ) : (\n            <p style={{ textAlign: 'center', paddingTop: '4rem' }}>\n                We couldn't find any matching events. Try changing dates or pick another action or event.\n            </p>\n        )\n    ) : (\n        <Loading />\n    )\n}\n","import React, { Component } from 'react'\nimport api from '../../lib/api'\nimport { Loading, toParams } from '../../lib/utils'\nimport PropTypes from 'prop-types'\n\nexport class ActionsTable extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {}\n        this.fetchGraph = this.fetchGraph.bind(this)\n        this.fetchGraph()\n    }\n    fetchGraph() {\n        let url = 'api/action/trends/?'\n        if (this.props.filters.session) url = 'api/event/sessions/?'\n        api.get(url + toParams(this.props.filters)).then(data => {\n            if (!this.props.filters.session) data = data.sort((a, b) => b.count - a.count)\n            this.setState({ data })\n            this.props.onData && this.props.onData(data)\n        })\n    }\n    componentDidUpdate(prevProps) {\n        if (prevProps.filters !== this.props.filters) {\n            this.fetchGraph()\n        }\n    }\n    render() {\n        let { data } = this.state\n        let { filters } = this.props\n        return data ? (\n            data[0] && (filters.session || data[0].labels) ? (\n                <table className=\"table\">\n                    <tbody>\n                        <tr>\n                            <th style={{ width: 100 }}>{filters.session ? 'Session Attribute' : 'Action'}</th>\n                            <th style={{ width: 50 }}>{filters.session ? 'Value' : 'Count'}</th>\n                        </tr>\n\n                        {data.map(item => (\n                            <tr key={item.label}>\n                                <td>{item.label}</td>\n                                <td>{item.count}</td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            ) : (\n                <p style={{ textAlign: 'center', marginTop: '4rem' }}>We couldn't find any matching actions.</p>\n            )\n        ) : (\n            <Loading />\n        )\n    }\n}\nActionsTable.propTypes = {\n    filters: PropTypes.object.isRequired,\n    onData: PropTypes.func,\n}\n","import React, { Component } from 'react'\nimport api from '../../lib/api'\nimport { Loading, toParams } from '../../lib/utils'\nimport { LineGraph } from './LineGraph'\n\nlet colors = [\n    'blue',\n    'yellow',\n    'green',\n    'red',\n    'purple',\n    'gray',\n    'indigo',\n    'pink',\n    'orange',\n    'teal',\n    'cyan',\n    'gray-dark',\n]\nlet getColorVar = variable =>\n    getComputedStyle(document.body).getPropertyValue('--' + variable)\nexport class ActionsPie extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {}\n        this.fetchGraph = this.fetchGraph.bind(this)\n        this.fetchGraph()\n    }\n    fetchGraph() {\n        api.get('api/action/trends/?' + toParams(this.props.filters)).then(\n            data => {\n                data = data.sort((a, b) => b.count - a.count)\n                let color_list = colors.map(color => getColorVar(color))\n                this.setState({\n                    data: [\n                        {\n                            labels: data.map(item => item.label),\n                            data: data.map(\n                                item =>\n                                    item.data &&\n                                    item.data.reduce((prev, d) => prev + d, 0)\n                            ),\n                            backgroundColor: color_list,\n                            hoverBackgroundColor: color_list,\n                            hoverBorderColor: color_list,\n                            borderColor: color_list,\n                            hoverBorderWidth: 10,\n                            borderWidth: 1,\n                        },\n                    ],\n                    total: data.reduce((prev, item) => prev + item.count, 0),\n                })\n                this.props.onData && this.props.onData(data)\n            }\n        )\n    }\n    componentDidUpdate(prevProps) {\n        if (prevProps.filters !== this.props.filters) this.fetchGraph()\n    }\n    render() {\n        let { data, total } = this.state\n        return data ? (\n            data[0] && data[0].labels ? (\n                <div\n                    style={{\n                        position: 'absolute',\n                        width: '100%',\n                        height: '100%',\n                    }}\n                >\n                    <h1\n                        style={{\n                            position: 'absolute',\n                            margin: '0 auto',\n                            left: '50%',\n                            top: '50%',\n                            fontSize: '3rem',\n                        }}\n                    >\n                        <div style={{ marginLeft: '-50%', marginTop: -30 }}>\n                            {total}\n                        </div>\n                    </h1>\n                    <LineGraph\n                        type=\"doughnut\"\n                        datasets={data}\n                        labels={data[0].labels}\n                    />\n                </div>\n            ) : (\n                <p style={{ textAlign: 'center', marginTop: '4rem' }}>\n                    We couldn't find any matching actions.\n                </p>\n            )\n        ) : (\n            <Loading />\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport { combineUrl } from 'kea-router'\nimport api from 'lib/api'\nimport { Link } from 'lib/components/Link'\nimport { DeleteWithUndo, Loading } from 'lib/utils'\nimport { FunnelViz } from '../funnels/FunnelViz'\nimport { ActionsLineGraph } from '../trends/ActionsLineGraph'\nimport { ActionsTable } from '../trends/ActionsTable'\nimport { ActionsPie } from '../trends/ActionsPie'\nimport { Dropdown } from 'lib/components/Dropdown'\n\nexport class Dashboard extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {}\n        this.fetchDashboard = this.fetchDashboard.bind(this)\n        this.fetchDashboard()\n    }\n    fetchDashboard() {\n        api.get('api/dashboard').then(items => this.setState({ items: items.results }))\n    }\n    render() {\n        let { items } = this.state\n        let typeMap = {\n            ActionsLineGraph: {\n                element: ActionsLineGraph,\n                link: filters => combineUrl('/trends', filters).url,\n            },\n            ActionsTable: {\n                element: ActionsTable,\n                link: filters => combineUrl('/trends', filters).url,\n            },\n            ActionsPie: {\n                element: ActionsPie,\n                link: filters => combineUrl('/trends', filters).url,\n            },\n            FunnelViz: {\n                element: FunnelViz,\n                link: filters => `/funnel/${filters.funnel_id}`,\n            },\n        }\n\n        return (\n            <div className=\"row\">\n                {items &&\n                    items.length > 0 &&\n                    items.map(item => {\n                        let Panel = typeMap[item.type].element\n                        Panel = <Panel dashboardItemId={item.id} filters={item.filters} />\n                        return (\n                            <div className=\"col-6\" key={item.id}>\n                                <div className=\"card\">\n                                    <h5 className=\"card-header\">\n                                        <Dropdown\n                                            className=\"float-right\"\n                                            buttonStyle={{\n                                                lineHeight: '1rem',\n                                                color: 'var(--gray)',\n                                                fontSize: '2rem',\n                                            }}\n                                        >\n                                            <Link className=\"dropdown-item\" to={typeMap[item.type].link(item.filters)}>\n                                                View graph\n                                            </Link>\n                                            <DeleteWithUndo\n                                                object={item}\n                                                className=\"text-danger dropdown-item\"\n                                                endpoint=\"dashboard\"\n                                                callback={this.fetchDashboard}\n                                            >\n                                                Delete panel\n                                            </DeleteWithUndo>\n                                        </Dropdown>\n                                        <Link to={typeMap[item.type].link(item.filters)}>{item.name}</Link>\n                                    </h5>\n                                    <div\n                                        style={{\n                                            overflowY: 'scroll',\n                                            height: '25vh',\n                                            maxHeight: '30vh',\n                                            position: 'relative',\n                                        }}\n                                    >\n                                        {Panel ? Panel : <Loading />}\n                                    </div>\n                                </div>\n                            </div>\n                        )\n                    })}\n                {items && this.props.user.has_events && items.length === 0 && (\n                    <p>\n                        You don't have any panels set up. <Link to=\"/trends\">Click here to create one.</Link>\n                    </p>\n                )}\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}