{"version":3,"sources":["webpack:///./frontend/src/lib/utils.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./frontend/src/scenes/trends/trendsLogic.js","webpack:///./frontend/src/models/actionsModel.js","webpack:///./frontend/src/lib/components/PropertyFilters/PropertyValue.js","webpack:///./frontend/src/lib/components/PropertyFilters/PropertyFilter.js","webpack:///./frontend/src/lib/components/PropertyFilters/propertyFilterLogic.js","webpack:///./frontend/src/lib/components/PropertyFilters/PropertyFilters.js","webpack:///./frontend/src/scenes/funnels/funnelLogic.js","webpack:///./frontend/src/scenes/trends/ActionFilter/entityFilterLogic.js","webpack:///./frontend/src/scenes/trends/ActionSelectInfo.js","webpack:///./frontend/src/lib/components/ActionSelectTab.js","webpack:///./frontend/src/lib/components/ActionSelectBox.js","webpack:///./frontend/src/scenes/trends/ActionFilter/ActionFilterDropdown.js","webpack:///./frontend/src/scenes/trends/ActionFilter/ActionFilterRow.js","webpack:///./frontend/src/scenes/trends/ActionFilter/ActionFilter.js","webpack:///./frontend/src/scenes/funnels/EditFunnel.js"],"names":["uuid","replace","c","crypto","getRandomValues","Uint8Array","toString","toParams","obj","Object","entries","filter","map","key","val","_isAMomentObject","encodeURIComponent","format","JSON","stringify","handleVal","join","fromParams","window","location","search","slice","split","reduce","a","b","decodeURIComponent","percentage","division","toLocaleString","undefined","style","maximumFractionDigits","Loading","className","TableRowLoading","colSpan","asOverlay","padding","textAlign","CloseButton","props","aria-hidden","Card","title","children","DeleteWithUndo","href","onClick","e","preventDefault","deleteWithUndo","undo","api","update","endpoint","object","id","deleted","then","callback","response","name","toast","toastId","propTypes","PropTypes","string","isRequired","shape","number","selectStyle","control","base","height","minHeight","indicatorsContainer","input","paddingBottom","paddingTop","margin","opacity","valueContainer","marginTop","option","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","capitalizeFirstLetter","charAt","toUpperCase","operatorMap","exact","is_not","icontains","not_icontains","gt","lt","operatorEntries","reverse","formatFilterName","str","value","includes","deletePersonData","person","confirm","objectsEqual","obj1","obj2","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","module","exports","arr","__esModule","arrayLikeToArray","Array","isArray","iter","Symbol","iterator","from","TypeError","EntityTypes","ACTIONS","EVENTS","NEW_ENTITY","disableMinuteFor","dStart","mStart","yStart","all","disableHourFor","ViewType","FILTERS","SESSIONS","cleanFilters","filters","interval","autocorrectInterval","display","session","actions","events","properties","filterClientSideParams","people_day","people_action","stickiness_days","date_from","minute_disabled","hour_disabled","trendsLogic","kea","dashboardItemId","connect","values","userLogic","actionsModel","loaders","results","loadResults","activeView","get","toAPIParams","setFilters","mergeFilters","fromUrl","setDisplay","loadPeople","action","day","breakdown_value","setShowingPeople","isShowing","setPeople","people","count","setActiveView","type","setCachedUrl","url","reducers","state","router","selectors","searchParams","_","cachedUrls","showingPeople","peopleAction","find","parseInt","peopleDay","listeners","breakpoint","params","entityId","shown_as","date_to","breakdown","filterParams","actionToUrl","pathname","cachedUrl","urlToAction","cleanSearchParams","keys","length","eventNames","event","order","actionContains","steps","step","__default","loadActions","actionsGrouped","data","label","options","forEach","push","afterMount","PropertyValue","loadPropertyValues","bind","ref","React","createRef","propertyKey","propValues","property","onSet","isEditing","loadOptions","defaultOptions","cacheOptions","formatCreateLabel","inputValue","allowCreateWhileLoading","createOptionPosition","placeholder","width","onChange","out","setState","select","blur","autoFocus","styles","onFocus","onInputChange","actionMeta","Component","any","operatorOptions","PropertyFilter","index","onComplete","logic","useValues","useActions","setFilter","item","remove","minWidth","isLoading","openMenuOnFocus","operator","isNaN","propertyFilterLogic","pageKey","loadEventProperties","setProperties","newFilter","loadPeopleProperties","loadPeoplePropertiesSuccess","propertyFilters","newFilters","newState","i","dict","result","f","error","mappedFilters","eventProperties","FilterRow","useState","open","setOpen","align","trigger","onVisibleChange","visible","defaultVisible","placement","content","maxWidth","overflow","textOverflow","cursor","float","PropertyFilters","marginBottom","funnelLogic","setFunnel","funnel","loadFunnel","updateFunnel","createFunnel","create","stepsWithCount","loadStepsWithCount","peopleSorted","score","indexOf","sort","isStepsEmpty","loadStepsWithCountSuccess","updateFunnelSuccess","createFunnelSuccess","toLocalFilters","toFilters","localFilters","entityFilterLogic","typeKey","selectFilter","updateFilterMath","math","updateFilter","removeLocalFilter","addFilter","updateFilterProperty","setLocalFilters","selectedFilter","entities","ActionSelectInfo","prevProps","infoDiv","current","rect","boundingRect","top","left","componentDidMount","entity","isOpen","listStyle","selector","tag_name","text","url_matching","ActionSelectTab","entityType","chooseEntityType","allTypes","flexDirection","borderBottom","backgroundColor","flex","justifyContent","borderTopLeftRadius","borderTopRightRadius","ActionSelectTabs","selected","determineActiveTab","activeTab","setActiveTab","child","labels","ActionSelectPanel","infoOpen","onMouseOver","infoBoundingRect","target","getBoundingClientRect","infoActionId","onMouseOut","Option","redirect","onHover","onBlur","relatedTarget","tagName","onSelect","defaultMenuIsOpen","active","components","message","ActionFilterDropdown","onClickOutside","dropdownRef","useRef","eventNamesGrouped","deselect","contains","useEffect","document","addEventListener","removeEventListener","ActionPanelContainer","panelIndex","alignItems","Link","to","array","bool","ActionFilterRow","node","entityFilterVisible","setEntityFilterVisible","border","fontWeight","MathSelector","onMathSelect","determineFilterLabel","marginLeft","position","items","Dropdown","toLowerCase","buttonClassName","marginRight","ActionFilter","EditFunnel","funnelId","actionsLoading","onSubmit","required","htmlType","disabled"],"mappings":"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","file":"editFunnel.js","sourcesContent":["import React from 'react'\nimport api from './api'\nimport { toast } from 'react-toastify'\nimport PropTypes from 'prop-types'\nimport { Spin } from 'antd'\n\nexport function uuid() {\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))).toString(16)\n    )\n}\n\nexport let toParams = obj => {\n    let handleVal = val => {\n        if (val._isAMomentObject) return encodeURIComponent(val.format('YYYY-MM-DD'))\n        val = typeof val === 'object' ? JSON.stringify(val) : val\n        return encodeURIComponent(val)\n    }\n    return Object.entries(obj)\n        .filter(([key, val]) => val)\n        .map(([key, val]) => `${key}=${handleVal(val)}`)\n        .join('&')\n}\nexport let fromParams = () =>\n    window.location.search != ''\n        ? window.location.search\n              .slice(1)\n              .split('&')\n              .reduce((a, b) => {\n                  b = b.split('=')\n                  a[b[0]] = decodeURIComponent(b[1])\n                  return a\n              }, {})\n        : {}\n\nexport let colors = ['success', 'secondary', 'warning', 'primary', 'danger', 'info', 'dark', 'light']\nexport let percentage = division =>\n    division\n        ? division.toLocaleString(undefined, {\n              style: 'percent',\n              maximumFractionDigits: 2,\n          })\n        : ''\n\nexport let Loading = () => (\n    <div className=\"loading-overlay\">\n        <div></div>\n        <Spin />\n    </div>\n)\n\nexport const TableRowLoading = ({ colSpan = 1, asOverlay = false }) => (\n    <tr className={asOverlay ? 'loading-overlay over-table' : ''}>\n        <td colSpan={colSpan} style={{ padding: 50, textAlign: 'center' }}>\n            <Spin />\n        </td>\n    </tr>\n)\n\nexport let CloseButton = props => {\n    return (\n        <span {...props} className={'close cursor-pointer ' + props.className} style={{ ...props.style }}>\n            <span aria-hidden=\"true\">&times;</span>\n        </span>\n    )\n}\n\nexport function Card(props) {\n    return (\n        <div {...props} className={'card ' + props.className} style={props.style} title=\"\">\n            {props.title && <div className=\"card-header\">{props.title}</div>}\n            {props.children}\n        </div>\n    )\n}\n\nexport let DeleteWithUndo = props => {\n    let deleteWithUndo = undo => {\n        api.update('api/' + props.endpoint + '/' + props.object.id, {\n            ...props.object,\n            deleted: undo ? false : true,\n        }).then(() => {\n            props.callback()\n            let response = (\n                <div>\n                    {!undo ? (\n                        <span>\n                            \"<strong>{props.object.name}</strong>\" deleted.{' '}\n                            <a\n                                href=\"#\"\n                                onClick={e => {\n                                    e.preventDefault()\n                                    deleteWithUndo(true)\n                                }}\n                            >\n                                Click here to undo\n                            </a>\n                        </span>\n                    ) : (\n                        <span>Delete un-done</span>\n                    )}\n                </div>\n            )\n            toast(response, { toastId: 'delete-item-' + props.object.id })\n        })\n    }\n\n    return (\n        <a\n            href=\"#\"\n            onClick={e => {\n                e.preventDefault()\n                deleteWithUndo()\n            }}\n            className={props.className}\n            style={props.style}\n        >\n            {props.children}\n        </a>\n    )\n}\nDeleteWithUndo.propTypes = {\n    endpoint: PropTypes.string.isRequired,\n    object: PropTypes.shape({\n        name: PropTypes.string.isRequired,\n        id: PropTypes.number.isRequired,\n    }).isRequired,\n    className: PropTypes.string,\n    style: PropTypes.object,\n}\n\nexport let selectStyle = {\n    control: base => ({\n        ...base,\n        height: 31,\n        minHeight: 31,\n    }),\n    indicatorsContainer: base => ({\n        ...base,\n        height: 31,\n    }),\n    input: base => ({\n        ...base,\n        paddingBottom: 0,\n        paddingTop: 0,\n        margin: 0,\n        opacity: 1,\n    }),\n    valueContainer: base => ({\n        ...base,\n        padding: '0 8px',\n        marginTop: -2,\n    }),\n    option: base => ({\n        ...base,\n        padding: '2px 15px',\n    }),\n}\n\nexport let debounce = (func, wait, immediate) => {\n    var timeout\n    return function() {\n        var context = this,\n            args = arguments\n        var later = function() {\n            timeout = null\n            if (!immediate) func.apply(context, args)\n        }\n        var callNow = immediate && !timeout\n        clearTimeout(timeout)\n        timeout = setTimeout(later, wait)\n        if (callNow) func.apply(context, args)\n    }\n}\n\nexport const capitalizeFirstLetter = string => {\n    return string.charAt(0).toUpperCase() + string.slice(1)\n}\n\nexport const operatorMap = {\n    exact: '= equals',\n    is_not: \"≠ doesn't equal\",\n    icontains: '∋ contains',\n    not_icontains: \"∌ doesn't contain\",\n    gt: '> greater than',\n    lt: '< lower than',\n}\n\nconst operatorEntries = Object.entries(operatorMap).reverse()\n\nexport const formatFilterName = str => {\n    for (let [key, value] of operatorEntries) {\n        if (str.includes(key)) return str.replace('__' + key, '') + ` ${value.split(' ')[0]} `\n    }\n    return str + ` ${operatorMap['exact'].split(' ')[0]} `\n}\n\nexport const deletePersonData = (person, callback) => {\n    window.confirm('Are you sure you want to delete this user? This cannot be undone') &&\n        api.delete('api/person/' + person.id).then(() => {\n            toast('Person succesfully deleted.')\n            if (callback) callback()\n        })\n}\n\nexport const objectsEqual = (obj1, obj2) => JSON.stringify(obj1) === JSON.stringify(obj2)\n","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import { kea } from 'kea'\n\nimport api from 'lib/api'\nimport { objectsEqual, toParams as toAPIParams } from 'lib/utils'\nimport { actionsModel } from '~/models/actionsModel'\nimport { userLogic } from 'scenes/userLogic'\nimport { router } from 'kea-router'\n\nexport const EntityTypes = {\n    ACTIONS: 'actions',\n    EVENTS: 'events',\n    NEW_ENTITY: 'new_entity',\n}\n\nexport const disableMinuteFor = {\n    dStart: false,\n    '-1d': false,\n    '-7d': true,\n    '-14d': true,\n    '-30d': true,\n    '-90d': true,\n    mStart: true,\n    '-1mStart': true,\n    yStart: true,\n    all: true,\n}\n\nexport const disableHourFor = {\n    dStart: false,\n    '-1d': false,\n    '-7d': false,\n    '-14d': false,\n    '-30d': false,\n    '-90d': true,\n    mStart: false,\n    '-1mStart': false,\n    yStart: true,\n    all: true,\n}\n\nexport const ViewType = {\n    FILTERS: 'FILTERS',\n    SESSIONS: 'SESSIONS',\n}\n\nfunction cleanFilters(filters) {\n    return {\n        ...filters,\n        interval: autocorrectInterval(filters),\n        display: filters.session && filters.session === 'dist' ? 'ActionsTable' : filters.display,\n        actions: Array.isArray(filters.actions) ? filters.actions : undefined,\n        events: Array.isArray(filters.events) ? filters.events : undefined,\n        properties: filters.properties || {},\n    }\n}\n\nfunction filterClientSideParams(filters) {\n    const {\n        people_day: _skip_this_one,\n        people_action: _skip_this_too,\n        stickiness_days: __and_this,\n        ...newFilters\n    } = filters\n\n    return newFilters\n}\n\nfunction autocorrectInterval({ date_from, interval }) {\n    if (!interval) return 'day' // undefined/uninitialized\n\n    const minute_disabled = disableMinuteFor[date_from] && interval === 'minute'\n    const hour_disabled = disableHourFor[date_from] && interval === 'hour'\n\n    if (minute_disabled) {\n        return 'hour'\n    } else if (hour_disabled) {\n        return 'day'\n    } else {\n        return interval\n    }\n}\n\n// props:\n// - dashboardItemId\n// - filters\nexport const trendsLogic = kea({\n    key: props => props.dashboardItemId || 'all_trends',\n\n    connect: {\n        values: [userLogic, ['eventNames'], actionsModel, ['actions']],\n    },\n\n    loaders: ({ values }) => ({\n        results: {\n            loadResults: async () => {\n                if (values.activeView === ViewType.SESSIONS) {\n                    return await api.get('api/event/sessions/?' + toAPIParams(filterClientSideParams(values.filters)))\n                }\n                return await api.get('api/action/trends/?' + toAPIParams(filterClientSideParams(values.filters)))\n            },\n        },\n    }),\n\n    actions: () => ({\n        setFilters: (filters, mergeFilters = true, fromUrl = false) => ({ filters, mergeFilters, fromUrl }),\n        setDisplay: display => ({ display }),\n\n        loadPeople: (action, day, breakdown_value) => ({ action, day, breakdown_value }),\n        setShowingPeople: isShowing => ({ isShowing }),\n        setPeople: (people, count, action, day, breakdown_value) => ({ people, count, action, day, breakdown_value }),\n        setActiveView: type => ({ type }),\n        setCachedUrl: (type, url) => ({ type, url }),\n    }),\n\n    reducers: ({ actions, props }) => ({\n        filters: [\n            props.dashboardItemId ? props.filters : state => cleanFilters(router.selectors.searchParams(state)),\n            {\n                [actions.setFilters]: (state, { filters, mergeFilters }) => {\n                    return cleanFilters({\n                        ...(mergeFilters ? state : {}),\n                        ...filters,\n                    })\n                },\n            },\n        ],\n        people: [\n            null,\n            {\n                [actions.setFilters]: () => null,\n                [actions.setPeople]: (_, people) => people,\n            },\n        ],\n        cachedUrls: [\n            {},\n            {\n                [actions.setCachedUrl]: (state, { type, url }) => ({ ...state, [type]: url }),\n            },\n        ],\n        showingPeople: [\n            false,\n            {\n                [actions.loadPeople]: () => true,\n                [actions.setShowingPeople]: (_, { isShowing }) => isShowing,\n            },\n        ],\n    }),\n\n    selectors: ({ selectors }) => ({\n        activeView: [() => [selectors.filters], filters => (filters.session ? ViewType.SESSIONS : ViewType.FILTERS)],\n        peopleAction: [\n            () => [selectors.filters, selectors.actions],\n            (filters, actions) =>\n                filters.people_action ? actions.find(a => a.id === parseInt(filters.people_action)) : null,\n        ],\n        peopleDay: [() => [selectors.filters], filters => filters.people_day],\n    }),\n\n    listeners: ({ actions, values }) => ({\n        [actions.setDisplay]: async ({ display }) => {\n            actions.setFilters({ display })\n        },\n        [actions.loadPeople]: async ({ action, day, breakdown_value }, breakpoint) => {\n            const params = filterClientSideParams({\n                ...values.filters,\n                entityId: action.id,\n                type: action.type,\n            })\n\n            if (values.filters.shown_as === 'Stickiness') {\n                params.stickiness_days = day\n            } else {\n                params.date_from = day\n                params.date_to = day\n            }\n            if (breakdown_value) {\n                params.properties = { ...params.properties, [params.breakdown]: breakdown_value }\n            }\n\n            const filterParams = toAPIParams(params)\n            actions.setPeople(null, null, action, day, breakdown_value)\n            const people = await api.get(`api/action/people/?include_last_event=1&${filterParams}`)\n            breakpoint()\n            actions.setPeople(people[0]?.people, people[0]?.count, action, day, breakdown_value)\n        },\n    }),\n\n    actionToUrl: ({ actions, values, props }) => ({\n        [actions.setFilters]: ({ fromUrl }) => {\n            if (props.dashboardItemId) {\n                return // don't use the URL if on the dashboard\n            }\n            if (!fromUrl) {\n                return ['/trends', values.filters]\n            }\n        },\n        [actions.setActiveView]: ({ type }) => {\n            if (props.dashboardItemId) {\n                return // don't use the URL if on the dashboard\n            }\n            actions.setCachedUrl(values.activeView, window.location.pathname + window.location.search)\n            const cachedUrl = values.cachedUrls[type]\n            if (cachedUrl) {\n                return cachedUrl\n            }\n            return ['/trends', type === ViewType.SESSIONS ? { session: 'avg' } : {}]\n        },\n    }),\n\n    urlToAction: ({ actions, values, props }) => ({\n        '/trends': (_, searchParams) => {\n            if (props.dashboardItemId) {\n                return // don't use the URL if on the dashboard\n            }\n\n            const cleanSearchParams = cleanFilters(searchParams)\n\n            // opening /trends without any params, just open $pageview, $screen or the first random event\n            if (Object.keys(searchParams).length === 0 && values.eventNames && values.eventNames[0]) {\n                const event = values.eventNames.includes('$pageview')\n                    ? '$pageview'\n                    : values.eventNames.includes('$screen')\n                    ? '$screen'\n                    : values.eventNames[0]\n\n                cleanSearchParams[EntityTypes.EVENTS] = [\n                    {\n                        id: event,\n                        name: event,\n                        type: EntityTypes.EVENTS,\n                        order: 0,\n                    },\n                ]\n            }\n\n            if (!objectsEqual(cleanSearchParams, values.filters)) {\n                actions.setFilters(cleanSearchParams, false, true)\n            }\n        },\n    }),\n})\n","import { kea } from 'kea'\nimport api from 'lib/api'\n\nconst actionContains = (action, event) => {\n    return action.steps.filter(step => step.event == event).length > 0\n}\n\nexport const actionsModel = kea({\n    loaders: () => ({\n        actions: {\n            __default: [],\n            loadActions: async () => {\n                const response = await api.get('api/action')\n                return response.results\n            },\n        },\n    }),\n    selectors: ({ selectors }) => ({\n        actionsGrouped: [\n            () => [selectors.actions],\n            actions => {\n                let data = [\n                    { label: 'Autocapture', options: [] },\n                    { label: 'Event', options: [] },\n                    { label: 'Pageview', options: [] },\n                ]\n                actions.forEach(action => {\n                    let format = { label: action.name, value: action.id }\n                    if (actionContains(action, '$autocapture')) data[0].options.push(format)\n                    if (actionContains(action, '$pageview')) data[2].options.push(format)\n                    if (!actionContains(action, '$autocapture') && !actionContains(action, '$pageview'))\n                        data[1].options.push(format)\n                })\n                return data\n            },\n        ],\n    }),\n\n    events: ({ actions }) => ({\n        afterMount: actions.loadActions,\n    }),\n})\n","import React, { Component } from 'react'\nimport api from '../../api'\nimport AsyncCreatableSelect from 'react-select/async-creatable/dist/react-select.esm'\nimport { selectStyle, debounce } from '../../utils'\nimport PropTypes from 'prop-types'\n\nexport class PropertyValue extends Component {\n    constructor(props) {\n        super(props)\n        this.state = { input: props.value }\n        this.loadPropertyValues = debounce(this.loadPropertyValues.bind(this), 250)\n        this.ref = React.createRef()\n    }\n    loadPropertyValues(value, callback) {\n        let key = this.props.propertyKey.split('__')[0]\n        api.get('api/' + this.props.endpoint + '/values/?key=' + key + (value ? '&value=' + value : '')).then(\n            propValues =>\n                callback(\n                    propValues.map(property => ({\n                        label: property.name ? property.name : '(empty)',\n                        value: property.name,\n                    }))\n                )\n        )\n    }\n    render() {\n        let { propertyKey, onSet, value } = this.props\n        let { isEditing, input } = this.state\n        return (\n            <span ref={this.ref} className=\"property-value\">\n                <AsyncCreatableSelect\n                    loadOptions={this.loadPropertyValues}\n                    defaultOptions={true}\n                    cacheOptions\n                    formatCreateLabel={inputValue => 'Specify: ' + inputValue}\n                    allowCreateWhileLoading={true}\n                    createOptionPosition=\"first\"\n                    key={propertyKey} // forces a reload of the component when the property changes\n                    placeholder=\"Property value\"\n                    style={{ width: 200 }}\n                    value={{ label: value, value: value }}\n                    onChange={out => {\n                        onSet(propertyKey, out.value)\n                        this.setState({ input: out.value })\n                        this.select.blur()\n                    }}\n                    autoFocus={!value}\n                    styles={selectStyle}\n                    ref={ref => {\n                        this.select = ref\n                    }}\n                    // This is a series of hacks to make the text editable\n                    inputValue={isEditing ? this.state.input : ''}\n                    onFocus={() => this.setState({ isEditing: true })}\n                    onInputChange={(input, actionMeta) => {\n                        if (actionMeta.action === 'input-change') {\n                            this.setState({ input })\n                            return input\n                        }\n                        return this.state.input\n                    }}\n                />\n            </span>\n        )\n    }\n}\nPropertyValue.propTypes = {\n    propertyKey: PropTypes.string.isRequired,\n    value: PropTypes.any.isRequired,\n    onSet: PropTypes.func.isRequired,\n}\n","import React from 'react'\nimport Select from 'react-select'\nimport { selectStyle, operatorMap } from 'lib/utils'\nimport { PropertyValue } from './PropertyValue'\nimport { useValues, useActions } from 'kea'\n\nconst operatorOptions = Object.entries(operatorMap).map(([key, value]) => ({\n    label: value,\n    value: key,\n}))\n\nexport function PropertyFilter({ index, endpoint, onComplete, logic }) {\n    const { properties, filters } = useValues(logic)\n    const { setFilter, remove } = useActions(logic)\n    let item = filters[index]\n    let key = Object.keys(item)[0] ? Object.keys(item)[0].split('__') : []\n    let value = Object.values(item)[0]\n    return (\n        <div className=\"row\" style={{ margin: '0.5rem -15px', minWidth: key[0] ? 700 : 200 }}>\n            {properties && (\n                <div className={key[0] ? 'col-4' : 'col'}>\n                    <Select\n                        options={properties}\n                        value={[{ label: key[0], value: key[0] }]}\n                        isLoading={!properties}\n                        placeholder=\"Property key\"\n                        onChange={item =>\n                            setFilter(\n                                index,\n                                item.value + (key[1] ? '__' + key[1] : ''),\n                                item.value !== key[0] ? '' : value\n                            )\n                        }\n                        styles={selectStyle}\n                        autoFocus={!key[0]}\n                        openMenuOnFocus={true}\n                    />\n                </div>\n            )}\n\n            {key[0] && (\n                <div className=\"col-3 pl-0\">\n                    <Select\n                        options={operatorOptions}\n                        style={{ width: 200 }}\n                        value={[\n                            {\n                                label: operatorMap[key[1]] || '= equals',\n                                value: key[1],\n                            },\n                        ]}\n                        placeholder=\"Property key\"\n                        onChange={operator => setFilter(index, key[0] + '__' + operator.value, value)}\n                        styles={selectStyle}\n                    />\n                </div>\n            )}\n            {key[0] && (\n                <div className=\"col-5 pl-0\">\n                    <PropertyValue\n                        endpoint={endpoint}\n                        key={Object.keys(item)[0]}\n                        propertyKey={Object.keys(item)[0]}\n                        value={value}\n                        onSet={(key, value) => {\n                            onComplete()\n                            setFilter(index, key, value)\n                        }}\n                    />\n                    {(key[1] === 'gt' || key[1] === 'lt') && isNaN(value) && (\n                        <p className=\"text-danger\">Value needs to be a number. Try \"equals\" or \"contains\" instead.</p>\n                    )}\n                </div>\n            )}\n        </div>\n    )\n}\n","import { kea } from 'kea'\nimport api from '../../../lib/api'\nimport { userLogic } from 'scenes/userLogic'\nimport { objectsEqual } from 'lib/utils'\nimport { router } from 'kea-router'\n\nexport const propertyFilterLogic = kea({\n    key: props => props.pageKey,\n\n    actions: () => ({\n        loadEventProperties: true,\n        setProperties: properties => ({ properties }),\n        update: filters => ({ filters }),\n        setFilter: (index, key, value) => ({ index, key, value }),\n        setFilters: filters => ({ filters }),\n        newFilter: true,\n        remove: index => ({ index }),\n    }),\n\n    loaders: () => ({\n        properties: {\n            loadPeopleProperties: async () => {\n                return (await api.get('api/person/properties')).map(property => ({\n                    label: property.name,\n                    value: property.name,\n                }))\n            },\n        },\n    }),\n\n    reducers: ({ actions, props }) => ({\n        properties: [\n            [],\n            {\n                [actions.loadPeoplePropertiesSuccess]: (_, { properties }) => properties,\n                [actions.setProperties]: (_, { properties }) => properties,\n            },\n        ],\n        filters: [\n            props.propertyFilters\n                ? Object.entries(props.propertyFilters).map(([key, value]) => ({ [key]: value }))\n                : [],\n            {\n                [actions.setFilter]: (state, { index, key, value }) => {\n                    const newFilters = [...state]\n                    newFilters[index] = { [key]: value }\n                    return newFilters\n                },\n                [actions.setFilters]: (_, { filters }) => filters,\n                [actions.newFilter]: state => {\n                    return [...state, {}]\n                },\n                [actions.remove]: (state, { index }) => {\n                    const newState = state.filter((_, i) => i !== index)\n                    if (newState.length === 0) {\n                        return [{}]\n                    }\n                    if (Object.keys(newState[newState.length - 1]).length !== 0) {\n                        return [...newState, {}]\n                    }\n                    return newState\n                },\n            },\n        ],\n    }),\n\n    listeners: ({ actions, props, values }) => ({\n        // Only send update if value is set to something\n        [actions.setFilter]: ({ value }) => value && actions.update(),\n        [actions.remove]: () => actions.update(),\n        [actions.update]: () => {\n            if (props.onChange) {\n                if (values.filters.length === 0) {\n                    actions.newFilter()\n                    return props.onChange({})\n                }\n                if (Object.keys(values.filters[values.filters.length - 1]).length !== 0) actions.newFilter()\n                let dict = values.filters.reduce((result, item) => ({ ...result, ...item }))\n                props.onChange(dict)\n            } else {\n                const { filters } = values\n                const { properties: _, ...searchParams } = router.values.searchParams\n                const { pathname } = router.values.location\n\n                if (filters.filter(f => Object.keys(f).length > 0).length > 0) {\n                    searchParams.properties = filters.reduce((result, item) => ({ ...result, ...item }))\n                }\n\n                if (!objectsEqual(router.values.searchParams, searchParams)) {\n                    router.actions.push(pathname, searchParams)\n                }\n            }\n        },\n    }),\n\n    urlToAction: ({ actions, values, props }) => ({\n        '*': (_, { properties }) => {\n            if (props.onChange) {\n                return\n            }\n\n            let filters\n            try {\n                filters = values.filters\n            } catch (error) {\n                // since this is a catch-all route, this code might run during or after the logic was unmounted\n                // if we have an error accessing the filter value, the logic is gone and we should return\n                return\n            }\n\n            if (!objectsEqual(properties || {}, filters)) {\n                const mappedFilters = Object.entries(properties || {}).map(([key, value]) => ({ [key]: value }))\n                actions.setFilters([...mappedFilters, {}])\n            }\n        },\n    }),\n\n    events: ({ actions, props }) => ({\n        afterMount: () => {\n            actions.newFilter()\n            if (props.endpoint === 'person') {\n                actions.loadPeopleProperties()\n            } else {\n                actions.setProperties(userLogic.values.eventProperties)\n            }\n        },\n    }),\n})\n","import React, { useState } from 'react'\nimport { PropertyFilter } from './PropertyFilter'\nimport { Button } from 'antd'\nimport { useValues, useActions } from 'kea'\nimport { propertyFilterLogic } from './propertyFilterLogic'\nimport { Popover, Row } from 'antd'\nimport { CloseButton, formatFilterName } from 'lib/utils'\n\nfunction FilterRow({ endpoint, item, index, filters, logic }) {\n    const { remove } = useActions(logic)\n    let [open, setOpen] = useState(false)\n\n    let handleVisibleChange = visible => {\n        if (!visible && Object.keys(item).length >= 0 && !item[Object.keys(item)[0]]) {\n            remove(index)\n        }\n        setOpen(visible)\n    }\n\n    return (\n        <Row align=\"middle\" className=\"mt-2 mb-2\">\n            <Popover\n                trigger=\"click\"\n                onVisibleChange={handleVisibleChange}\n                defaultVisible={false}\n                visible={open}\n                placement=\"bottomLeft\"\n                content={\n                    <PropertyFilter\n                        key={index}\n                        index={index}\n                        endpoint={endpoint || 'event'}\n                        onComplete={() => setOpen(false)}\n                        logic={logic}\n                    />\n                }\n            >\n                {Object.keys(item).length !== 0 ? (\n                    <Button type=\"primary\" shape=\"round\" style={{ maxWidth: '85%' }}>\n                        <span style={{ width: '100%', overflow: 'hidden', textOverflow: 'ellipsis' }}>\n                            {formatFilterName(Object.keys(item)[0]) + item[Object.keys(item)[0]]}\n                        </span>\n                    </Button>\n                ) : (\n                    <Button type=\"default\" shape=\"round\">\n                        {'New Filter'}\n                    </Button>\n                )}\n            </Popover>\n            {index !== filters.length - 1 && (\n                <CloseButton\n                    className=\"ml-1\"\n                    onClick={() => {\n                        remove(index)\n                    }}\n                    style={{ cursor: 'pointer', float: 'none' }}\n                />\n            )}\n        </Row>\n    )\n}\n\nexport function PropertyFilters({ endpoint, propertyFilters, className, style, onChange, pageKey }) {\n    const logic = propertyFilterLogic({ propertyFilters, endpoint, onChange, pageKey })\n    const { filters } = useValues(logic)\n\n    return (\n        <div\n            className={className || 'col-8'}\n            style={{\n                padding: 0,\n                marginBottom: '2rem',\n                display: 'inline',\n                style,\n            }}\n        >\n            <div className=\"column\">\n                {filters &&\n                    filters.map((item, index) => {\n                        return (\n                            <FilterRow\n                                key={index === filters.length - 1 ? index : `${index}_${Object.keys(item)[0]}`}\n                                logic={logic}\n                                item={item}\n                                index={index}\n                                filters={filters}\n                                endpoint={endpoint}\n                            />\n                        )\n                    })}\n            </div>\n        </div>\n    )\n}\n","import { kea } from 'kea'\nimport api from 'lib/api'\nimport { toast } from 'react-toastify'\n\nexport const funnelLogic = kea({\n    key: props => props.id || 'new',\n\n    actions: () => ({\n        setFunnel: (funnel, update) => ({ funnel, update }),\n    }),\n\n    loaders: ({ props }) => ({\n        funnel: [\n            { filters: {} },\n            {\n                loadFunnel: async (id = props.id) => {\n                    return await api.get('api/funnel/' + id + '/?exclude_count=1')\n                },\n                updateFunnel: async funnel => {\n                    return await api.update('api/funnel/' + funnel.id, funnel)\n                },\n                createFunnel: async funnel => {\n                    return await api.create('api/funnel', funnel)\n                },\n            },\n        ],\n        stepsWithCount: {\n            loadStepsWithCount: async (id = props.id) => {\n                return (await api.get('api/funnel/' + id)).steps\n            },\n        },\n        people: {\n            loadPeople: async steps => {\n                return (await api.get('api/person/?id=' + steps[0].people.join(','))).results\n            },\n        },\n    }),\n\n    reducers: () => ({\n        funnel: {\n            setFunnel: (state, { funnel }) => ({\n                ...state,\n                ...funnel,\n                filters: { ...state.filters, ...funnel.filters },\n            }),\n        },\n    }),\n\n    selectors: ({ selectors }) => ({\n        peopleSorted: [\n            () => [selectors.stepsWithCount, selectors.people],\n            (steps, people) => {\n                if (!people) return null\n                const score = person => {\n                    return steps.reduce((val, step) => (step.people.indexOf(person.id) > -1 ? val + 1 : val), 0)\n                }\n                return people.sort((a, b) => score(b) - score(a))\n            },\n        ],\n        isStepsEmpty: [\n            () => [selectors.funnel],\n            funnel => {\n                return funnel && [...(funnel.filters.actions || []), ...(funnel.filters.events || [])].length === 0\n            },\n        ],\n    }),\n\n    listeners: ({ actions, values }) => ({\n        loadStepsWithCountSuccess: async () => {\n            actions.loadPeople(values.stepsWithCount)\n        },\n        setFunnel: ({ update }) => {\n            if (update) actions.updateFunnel(values.funnel)\n        },\n        updateFunnelSuccess: async ({ funnel }) => {\n            actions.loadStepsWithCount(funnel.id)\n            toast('Funnel saved!')\n        },\n        createFunnelSuccess: ({ funnel }) => {\n            actions.loadStepsWithCount(funnel.id)\n            toast('Funnel saved!')\n        },\n    }),\n\n    actionToUrl: () => ({\n        createFunnelSuccess: ({ funnel }) => `/funnel/${funnel.id}`,\n    }),\n\n    events: ({ actions, key }) => ({\n        afterMount: () => {\n            if (key === 'new') {\n                return\n            }\n            actions.loadFunnel()\n            actions.loadStepsWithCount()\n        },\n    }),\n})\n","import { kea } from 'kea'\nimport { actionsModel } from '~/models/actionsModel'\nimport { EntityTypes } from '../trendsLogic'\nimport { userLogic } from 'scenes/userLogic'\n\nfunction toLocalFilters(filters) {\n    return [\n        ...(filters[EntityTypes.ACTIONS] || []),\n        ...(filters[EntityTypes.EVENTS] || []),\n        ...(filters[EntityTypes.NEW_ENTITY] || []),\n    ]\n        .sort((a, b) => a.order - b.order)\n        .map((filter, order) => ({ ...filter, order }))\n}\n\nfunction toFilters(localFilters) {\n    const filters = localFilters.map((filter, index) => ({\n        ...filter,\n        order: index,\n    }))\n\n    return {\n        [EntityTypes.ACTIONS]: filters.filter(filter => filter.type === EntityTypes.ACTIONS),\n        [EntityTypes.EVENTS]: filters.filter(filter => filter.type === EntityTypes.EVENTS),\n        [EntityTypes.NEW_ENTITY]: filters.filter(filter => filter.type === EntityTypes.NEW_ENTITY),\n    }\n}\n\n// required props:\n// - filters\n// - setFilters\n// - typeKey\nexport const entityFilterLogic = kea({\n    key: props => props.typeKey,\n    connect: {\n        values: [userLogic, ['eventNames'], actionsModel, ['actions']],\n    },\n    actions: () => ({\n        selectFilter: filter => ({ filter }),\n        updateFilterMath: filter => ({\n            type: filter.type,\n            value: filter.value,\n            math: filter.math,\n            index: filter.index,\n        }),\n        updateFilter: filter => ({ type: filter.type, index: filter.index, value: filter.value }),\n        removeLocalFilter: filter => ({ value: filter.value, type: filter.type, index: filter.index }),\n        addFilter: true,\n        updateFilterProperty: filter => ({ properties: filter.properties, index: filter.index }),\n        setFilters: filters => ({ filters }),\n        setLocalFilters: filters => ({ filters }),\n    }),\n\n    reducers: ({ props }) => ({\n        selectedFilter: [\n            null,\n            {\n                selectFilter: (state, { filter }) => filter,\n            },\n        ],\n        localFilters: [\n            toLocalFilters(props.filters),\n            {\n                setLocalFilters: (_, { filters }) => toLocalFilters(filters),\n            },\n        ],\n    }),\n\n    selectors: ({ selectors }) => ({\n        entities: [\n            () => [selectors.eventNames, selectors.actions],\n            (events, actions) => {\n                return {\n                    [EntityTypes.ACTIONS]: actions,\n                    [EntityTypes.EVENTS]: events.map(event => ({ id: event, name: event })),\n                }\n            },\n        ],\n        filters: [() => [selectors.localFilters], localFilters => toFilters(localFilters)],\n    }),\n\n    listeners: ({ actions, values, props }) => ({\n        updateFilter: ({ type, index, value }) => {\n            actions.setFilters(\n                values.localFilters.map((filter, i) => (i === index ? { ...filter, id: value, type } : filter))\n            )\n            actions.selectFilter(null)\n        },\n        updateFilterProperty: ({ properties, index }) => {\n            actions.setFilters(\n                values.localFilters.map((filter, i) => (i === index ? { ...filter, properties } : filter))\n            )\n        },\n        updateFilterMath: ({ math, index }) => {\n            actions.setFilters(values.localFilters.map((filter, i) => (i === index ? { ...filter, math } : filter)))\n        },\n        removeLocalFilter: ({ index }) => {\n            actions.setFilters(values.localFilters.filter((_, i) => i !== index))\n        },\n        addFilter: () => {\n            actions.setFilters([\n                ...values.localFilters,\n                { id: null, type: EntityTypes.NEW_ENTITY, order: values.localFilters.length },\n            ])\n        },\n        setFilters: ({ filters }) => {\n            props.setFilters(toFilters(filters))\n        },\n    }),\n})\n","import React, { Component } from 'react'\nimport { Card } from '../../lib/utils'\n\nexport class ActionSelectInfo extends Component {\n    infoDiv = React.createRef()\n    componentDidMount(prevProps) {\n        if (!this.infoDiv.current) return\n        let rect = this.props.boundingRect\n        this.infoDiv.current.style.top = rect.top - rect.height / 2 + 'px'\n        this.infoDiv.current.style.left = rect.left + rect.width + 'px'\n        this.infoDiv.current.style.opacity = 1\n    }\n    componentDidUpdate() {\n        this.componentDidMount()\n    }\n    render() {\n        let { entity, isOpen } = this.props\n        if (!entity) return null\n        return (\n            <div className=\"select-box-info\" ref={this.infoDiv} style={{ opacity: isOpen ? 1 : 0 }}>\n                <div style={{ marginBottom: '0.5rem' }}>{entity.name}</div>\n                {entity.steps &&\n                    entity.steps.map((step, index) => (\n                        <div key={step.id}>\n                            <Card key={step.id} style={{ marginBottom: 0 }}>\n                                <div className=\"card-body\">\n                                    <strong>\n                                        {step.event && step.event[0] == '$'\n                                            ? step.event[1].toUpperCase() + step.event.slice(2)\n                                            : step.event}\n                                    </strong>\n                                    <ul style={{ listStyle: 'none' }}>\n                                        {step.selector && (\n                                            <li>\n                                                CSS selector matches\n                                                <pre>{step.selector}</pre>\n                                            </li>\n                                        )}\n                                        {step.tag_name && (\n                                            <li>\n                                                Tag name matches <pre>{step.tag_name}</pre>\n                                            </li>\n                                        )}\n                                        {step.text && (\n                                            <li>\n                                                Text matches <pre>{step.text}</pre>\n                                            </li>\n                                        )}\n                                        {step.href && (\n                                            <li>\n                                                Link HREF matches <pre>{step.href}</pre>\n                                            </li>\n                                        )}\n                                        {step.url && (\n                                            <li>\n                                                URL {step.url_matching == 'contains' ? 'contains' : 'matches'}{' '}\n                                                <pre>{step.url}</pre>\n                                            </li>\n                                        )}\n                                    </ul>\n                                </div>\n                            </Card>\n                            {index < entity.steps.length - 1 && (\n                                <div className=\"secondary\" style={{ textAlign: 'center', margin: '1rem' }}>\n                                    OR\n                                </div>\n                            )}\n                        </div>\n                    ))}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport { capitalizeFirstLetter } from '~/lib/utils'\n\nexport default class ActionSelectTab extends Component {\n    render() {\n        let { entityType, chooseEntityType, allTypes } = this.props\n        return (\n            <div style={{ display: 'flex', flexDirection: 'row', height: '25px', borderBottom: '1px solid #cccccc' }}>\n                {allTypes.map((type, index) => (\n                    <div\n                        key={index}\n                        style={{\n                            backgroundColor: entityType == type ? '#eeeeee' : 'white',\n                            flex: 1,\n                            display: 'flex',\n                            justifyContent: 'center',\n                            borderTopLeftRadius: index == 0 ? '5px' : '0px',\n                            borderTopRightRadius: index == allTypes.length - 1 ? '5px' : '0px',\n                            cursor: 'pointer',\n                        }}\n                        onClick={() => chooseEntityType(type)}\n                    >\n                        {capitalizeFirstLetter(type)}\n                    </div>\n                ))}\n            </div>\n        )\n    }\n}\n","import React, { Component, useState } from 'react'\nimport Select, { components } from 'react-select'\nimport { ActionSelectInfo } from 'scenes/trends/ActionSelectInfo'\nimport { selectStyle } from '../utils'\nimport PropTypes from 'prop-types'\nimport ActionSelectTab from './ActionSelectTab'\nimport { Link } from 'lib/components/Link'\n\nconst determineActiveTab = props => {\n    if (props.selected) {\n        return props.selected\n    } else {\n        return Array.isArray(props.children) ? props.children[0].props.title : props.children.props.title\n    }\n}\n\nexport function ActionSelectTabs(props) {\n    let [activeTab, setActiveTab] = useState(determineActiveTab(props))\n    let [labels] = useState(\n        Array.isArray(props.children) ? props.children.map(child => child.props.title) : [props.children.props.title]\n    )\n    return (\n        <div className=\"select-box\" style={{ padding: 0 }}>\n            {labels.length > 1 && (\n                <ActionSelectTab\n                    entityType={activeTab}\n                    allTypes={labels}\n                    chooseEntityType={setActiveTab}\n                ></ActionSelectTab>\n            )}\n            {Array.isArray(props.children)\n                ? props.children.map(child => {\n                      if (child.props.title !== activeTab) return undefined\n                      return child\n                  })\n                : props.children}\n        </div>\n    )\n}\n\nexport class ActionSelectPanel extends Component {\n    state = {\n        infoOpen: false,\n    }\n\n    Option = props => {\n        return (\n            <div\n                onMouseOver={e =>\n                    this.setState({\n                        infoOpen: true,\n                        infoBoundingRect: e.target.getBoundingClientRect(),\n                        infoActionId: props.value,\n                    })\n                }\n                onMouseOut={e => {\n                    this.setState({ infoOpen: false })\n                }}\n            >\n                <components.Option {...props} />\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <div style={{ padding: '1rem', height: '90%', width: '100%' }}>\n                {this.props.redirect}\n                {this.state.infoOpen && (\n                    <ActionSelectInfo\n                        isOpen={this.state.infoOpen}\n                        boundingRect={this.state.infoBoundingRect}\n                        entity={this.props.onHover(this.state.infoActionId)}\n                    />\n                )}\n                <Select\n                    onBlur={e => {\n                        if (e.relatedTarget && e.relatedTarget.tagName == 'A') return\n                        this.setState({ infoOpen: false })\n                    }}\n                    onChange={this.props.onSelect}\n                    defaultMenuIsOpen={this.props.defaultMenuIsOpen}\n                    autoFocus={true}\n                    value={this.props.active}\n                    className=\"select-box-select\"\n                    styles={selectStyle}\n                    components={{ Option: this.Option }}\n                    options={this.props.options}\n                />\n                {this.props.message}\n            </div>\n        )\n    }\n}\n\nActionSelectPanel.propTypes = {\n    options: PropTypes.array.isRequired,\n    defaultMenuIsOpen: PropTypes.bool.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    title: PropTypes.string.isRequired,\n    onHover: PropTypes.func.isRequired,\n}\n","import React, { useRef, useEffect } from 'react'\nimport { useActions, useValues } from 'kea'\nimport { EntityTypes } from '../trendsLogic'\nimport { ActionSelectPanel, ActionSelectTabs } from '~/lib/components/ActionSelectBox'\nimport { Link } from 'lib/components/Link'\nimport { userLogic } from 'scenes/userLogic'\nimport { actionsModel } from '~/models/actionsModel'\n\nexport function ActionFilterDropdown({ onClickOutside, logic }) {\n    const dropdownRef = useRef()\n    const { selectedFilter } = useValues(logic)\n    const { eventNamesGrouped } = useValues(userLogic)\n    const { actionsGrouped } = useValues(actionsModel)\n\n    const deselect = e => {\n        if (dropdownRef.current.contains(e.target)) {\n            return\n        }\n        onClickOutside && onClickOutside(e)\n    }\n\n    useEffect(() => {\n        document.addEventListener('mousedown', deselect)\n        return () => {\n            document.removeEventListener('mousedown', deselect)\n        }\n    }, [])\n\n    return (\n        <div ref={dropdownRef} className=\"action-filter-dropdown\">\n            <ActionSelectTabs\n                selected={\n                    selectedFilter.type && selectedFilter.type !== EntityTypes.NEW_ENTITY ? selectedFilter.type : null\n                }\n            >\n                <ActionPanelContainer\n                    title=\"actions\"\n                    entityType={EntityTypes.ACTIONS}\n                    options={actionsGrouped}\n                    panelIndex={0}\n                    logic={logic}\n                />\n                <ActionPanelContainer\n                    title=\"events\"\n                    entityType={EntityTypes.EVENTS}\n                    options={eventNamesGrouped}\n                    panelIndex={1}\n                    logic={logic}\n                />\n            </ActionSelectTabs>\n        </div>\n    )\n}\n\nexport function ActionPanelContainer({ entityType, panelIndex, options, logic }) {\n    const { entities, selectedFilter, filters } = useValues(logic)\n    const { updateFilter } = useActions(logic)\n\n    const dropDownOnSelect = item => updateFilter({ type: entityType, value: item.value, index: selectedFilter.index })\n    const dropDownOnHover = value => entities[entityType].filter(a => a.id === value)[0]\n\n    const redirect = () => {\n        if (selectedFilter && selectedFilter.type === EntityTypes.ACTIONS && entityType === EntityTypes.ACTIONS) {\n            const action = entities[selectedFilter.type].filter(a => a.id === selectedFilter.filter.id)[0]\n            return (\n                <a href={'/action/' + selectedFilter.filter.id} target=\"_blank\">\n                    Edit \"{action.name}\" <i className=\"fi flaticon-export\" />\n                </a>\n            )\n        } else {\n            return null\n        }\n    }\n\n    const message = () => {\n        if (entityType === EntityTypes.ACTIONS && !filters[EntityTypes.ACTIONS]) {\n            return (\n                <div\n                    style={{\n                        height: '100%',\n                        display: 'flex',\n                        flexDirection: 'column',\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                    }}\n                >\n                    <p>You don't have any actions defined yet. </p>\n                    <Link to=\"/action\">Click here to define an action.</Link>\n                </div>\n            )\n        } else {\n            return null\n        }\n    }\n\n    return (\n        <ActionSelectPanel\n            key={panelIndex}\n            title={entityType}\n            options={options}\n            defaultMenuIsOpen={true}\n            onSelect={dropDownOnSelect}\n            onHover={dropDownOnHover}\n            active={null}\n            redirect={redirect()}\n            message={message()}\n        />\n    )\n}\n","import React, { useRef, useState } from 'react'\nimport { useActions, useValues } from 'kea'\nimport { EntityTypes } from '../trendsLogic'\nimport { CloseButton } from '~/lib/utils'\nimport { Dropdown } from '~/lib/components/Dropdown'\nimport { ActionFilterDropdown } from './ActionFilterDropdown'\nimport { Tooltip } from 'antd'\nimport { PropertyFilters } from 'lib/components/PropertyFilters/PropertyFilters'\nimport { userLogic } from 'scenes/userLogic'\n\nconst determineFilterLabel = (visible, filter) => {\n    if (visible) return 'Hide Filters'\n\n    if (filter.properties && Object.keys(filter.properties).length > 0) {\n        return (\n            Object.keys(filter.properties).length + ' Filter' + (Object.keys(filter.properties).length === 1 ? '' : 's')\n        )\n    }\n    return 'Add Filters'\n}\n\nexport function ActionFilterRow({ logic, filter, index }) {\n    const node = useRef()\n    const { selectedFilter, entities } = useValues(logic)\n    const { selectFilter, updateFilterMath, removeLocalFilter, updateFilterProperty } = useActions(logic)\n    const { eventProperties } = useValues(userLogic)\n    const [entityFilterVisible, setEntityFilterVisible] = useState(false)\n\n    let entity, name, value\n    let math = filter.math\n    const onClose = () => {\n        removeLocalFilter({ value: filter.id, type: filter.type, index })\n    }\n    const onMathSelect = (_, math) => {\n        updateFilterMath({ math, value: filter.id, type: filter.type, index: index })\n    }\n\n    const dropDownCondition = () =>\n        selectedFilter && selectedFilter.type === filter.type && selectedFilter.index === index\n\n    const onClick = () => {\n        if (selectedFilter && selectedFilter.type === filter.type && selectedFilter.index === index) selectFilter(null)\n        else selectFilter({ filter, type: filter.type, index })\n    }\n\n    if (filter.type === EntityTypes.NEW_ENTITY) {\n        name = null\n        value = null\n    } else {\n        entity = entities[filter.type].filter(action => action.id === filter.id)[0] || {}\n        name = entity.name || filter.name\n        value = entity.id || filter.id\n    }\n    return (\n        <div>\n            <button\n                ref={node}\n                className=\"filter-action\"\n                type=\"button\"\n                onClick={onClick}\n                style={{\n                    border: 0,\n                    padding: 0,\n                    fontWeight: 500,\n                    borderBottom: '1.5px dotted var(--blue)',\n                }}\n            >\n                {name || 'Select action'}\n            </button>\n            <MathSelector math={math} index={index} onMathSelect={onMathSelect} />\n            <div className=\"btn btn-sm btn-light\" onClick={() => setEntityFilterVisible(!entityFilterVisible)}>\n                {determineFilterLabel(entityFilterVisible, filter)}\n            </div>\n            <CloseButton\n                onClick={onClose}\n                style={{\n                    float: 'none',\n                    marginLeft: 8,\n                    position: 'absolute',\n                    marginTop: 3,\n                }}\n            />\n            {entityFilterVisible && (\n                <div className=\"ml-4\">\n                    <PropertyFilters\n                        pageKey={`${index}-${value}-filter`}\n                        properties={eventProperties}\n                        propertyFilters={filter.properties}\n                        onChange={properties => updateFilterProperty({ properties, index })}\n                        style={{ marginBottom: 0 }}\n                    />\n                </div>\n            )}\n            {dropDownCondition() && (\n                <ActionFilterDropdown\n                    logic={logic}\n                    onClickOutside={e => {\n                        if (node.current.contains(e.target)) {\n                            return\n                        }\n                        selectFilter(null)\n                    }}\n                />\n            )}\n        </div>\n    )\n}\n\nfunction MathSelector(props) {\n    let items = ['Total', 'DAU']\n    return (\n        <Dropdown\n            title={items[items.map(i => i.toLowerCase()).indexOf(props.math)] || 'Total'}\n            buttonClassName=\"btn btn-sm btn-light\"\n            style={{ marginLeft: 32, marginRight: 16 }}\n        >\n            <Tooltip\n                placement=\"right\"\n                title=\"Total shows total event volume. If a user performs an event 3 times on one day it counts as 3.\"\n            >\n                <a href=\"#\" className=\"dropdown-item\" onClick={() => props.onMathSelect(props.index, 'total')}>\n                    Total\n                </a>\n            </Tooltip>\n\n            <Tooltip\n                placement=\"right\"\n                title=\"Daily Active Users. Selecting DAU will mean a user performing an event 3 times on one day counts as 1.\"\n            >\n                <a href=\"#\" className=\"dropdown-item\" onClick={() => props.onMathSelect(props.index, 'dau')}>\n                    DAU\n                </a>\n            </Tooltip>\n        </Dropdown>\n    )\n}\n","import React, { useEffect } from 'react'\nimport { useActions, useValues } from 'kea'\nimport { entityFilterLogic } from './entityFilterLogic'\nimport { ActionFilterRow } from './ActionFilterRow'\nimport { Button } from 'antd'\n\nexport function ActionFilter({ setFilters, filters, typeKey }) {\n    const logic = entityFilterLogic({ setFilters, filters, typeKey })\n\n    const { localFilters } = useValues(logic)\n    const { addFilter, setLocalFilters } = useActions(logic)\n\n    // No way around this. Somehow the ordering of the logic calling each other causes stale \"localFilters\"\n    // to be shown on the /funnels page, even if we try to use a selector with props to hydrate it\n    useEffect(() => {\n        setLocalFilters(filters)\n    }, [filters])\n\n    return (\n        <div>\n            {localFilters &&\n                localFilters.map((filter, index) => (\n                    <ActionFilterRow logic={logic} filter={filter} index={index} key={index} />\n                ))}\n            <Button type=\"primary\" onClick={() => addFilter()} style={{ marginTop: '0.5rem' }}>\n                Add action/event\n            </Button>\n        </div>\n    )\n}\n","import React from 'react'\nimport { Card } from 'lib/utils'\nimport { Link } from 'lib/components/Link'\nimport { actionsModel } from '~/models/actionsModel'\nimport { useValues, useActions } from 'kea'\nimport { funnelLogic } from './funnelLogic'\nimport { ActionFilter } from 'scenes/trends/ActionFilter/ActionFilter'\nimport { PropertyFilters } from 'lib/components/PropertyFilters/PropertyFilters'\nimport { Button } from 'antd'\nimport { userLogic } from 'scenes/userLogic'\n\nexport function EditFunnel({ funnelId }) {\n    const { funnel, isStepsEmpty } = useValues(funnelLogic({ id: funnelId }))\n    const { setFunnel, updateFunnel, createFunnel } = useActions(funnelLogic({ id: funnelId }))\n    const { actions, actionsLoading } = useValues(actionsModel())\n    const { eventProperties } = useValues(userLogic)\n\n    return (\n        <form\n            onSubmit={e => {\n                e.preventDefault()\n                if (!funnel.id) {\n                    createFunnel(funnel)\n                } else {\n                    updateFunnel(funnel)\n                }\n            }}\n        >\n            <Card>\n                <div className=\"card-body\">\n                    <input\n                        required\n                        placeholder=\"User drop off through signup\"\n                        type=\"text\"\n                        autoFocus\n                        onChange={e => setFunnel({ name: e.target.value })}\n                        value={funnel.name || ''}\n                        className=\"form-control\"\n                    />\n                    {!actionsLoading && actions.length === 0 && (\n                        <div className=\"alert alert-warning\" style={{ marginTop: '1rem' }}>\n                            You don't have any actions set up. <Link to=\"/actions\">Click here to set up an action</Link>\n                        </div>\n                    )}\n                    <br />\n                    <ActionFilter\n                        filters={funnel.filters}\n                        setFilters={filters => setFunnel({ filters }, false)}\n                        typeKey={`EditFunnel-${funnel.id || 'new'}`}\n                    />\n                    <br />\n                    <hr />\n                    <h4 className=\"secondary mt-3\">Filters</h4>\n                    <PropertyFilters\n                        pageKey={`EditFunnel-${funnel.id || 'new'}`}\n                        properties={eventProperties}\n                        propertyFilters={funnel.filters.properties || []}\n                        onChange={properties =>\n                            setFunnel({\n                                filters: {\n                                    properties,\n                                },\n                            })\n                        }\n                        style={{ marginBottom: 0 }}\n                    />\n                    <hr />\n                    <Button type=\"primary mt-3\" htmlType=\"submit\" disabled={isStepsEmpty}>\n                        Save funnel\n                    </Button>\n                    <br />\n                    {isStepsEmpty && <small>Add some actions/events to save the funnel</small>}\n                </div>\n            </Card>\n        </form>\n    )\n}\n"],"sourceRoot":""}